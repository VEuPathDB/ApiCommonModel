<wdkModel>

   <!-- notes
      - we should redefine the bfmv to include only columns that all projects have, moving
        the other stuff into auxiliary tables.  this way the sql for the bfmv can be shared.

      - what does api's <projectParamRef> do?
   -->
   
    <recordClassSet name="TranscriptRecordClasses">


  <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
  <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
  <!-- Gene Record -->  
  <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
  <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

<!-- record displayName used in results page where gene and transcripts counts are shown -->
        <recordClass name="TranscriptRecordClass" 
                     urlName="transcript"
                     displayName="Transcript" customBooleanQueryClassName="org.apidb.apicommon.model.TranscriptBooleanQuery">

	  <resultSizeQueryRef recordDisplayName="Gene" ref="GeneSummaries.countOfGenes"/>
	  <resultPropertyQueryRef  propertyName="genesMissingTranscriptsCount" ref="GeneSummaries.countOfGenesWithMissingTranscripts"/>

    <attributeCategories>
      <attributeCategory name="gene_parent" displayName="Gene Specific">
        <attributeCategory name="summary" displayName="Summary"/>
        <attributeCategory name="curation" displayName="Publications, Curation"/>
        <attributeCategory name="ids" displayName="Text, IDs, Species"/>
        <attributeCategory name="position" displayName="Genomic Context"/>
        <attributeCategory name="geneattribs" displayName="Gene Attributes"/>
        <attributeCategory name="evolution" displayName="Evolution"/>
        <attributeCategory name="popbio" displayName="Population Biology"/>
        <attributeCategory name="hostresp" displayName="Host Response">
        </attributeCategory>
        <attributeCategory name="trasexpr" displayName="Gene Expression">

          <attributeCategory name="trasexprMicroarray" displayName="Microarray">
          </attributeCategory>
          <attributeCategory name="trasexprRNASeq" displayName="RNASeq">
          </attributeCategory>
        </attributeCategory>
      </attributeCategory>

      <attributeCategory name="trans_parent" displayName="Transcript Specific">
        <attributeCategory name="tranattribs" displayName="Transcript Attributes"/>
        <attributeCategory name="proattribs" displayName="Protein Attributes"/>
        <attributeCategory name="profeatures" displayName="Protein Features"/>
        <attributeCategory name="similarity" displayName="Similarity/Pattern"/>
        <attributeCategory name="localization" displayName="Cellular Localization"/>

        <attributeCategory name="proexpr" displayName="Protein Expression">
        </attributeCategory>
        <attributeCategory name="cellloc" displayName="Cellular Location"/>
        <attributeCategory name="putfunc" displayName="Putatitve Function">
          <attributeCategory name="goterms" displayName="GO Terms">
            <attributeCategory name="annotgoterms" displayName="Annotated GO Term"/>
            <attributeCategory name="predgoterms" displayName="Predicted GO Term"/>
          </attributeCategory>
          <attributeCategory name="goids" displayName="GO IDs">
            <attributeCategory name="annotgoids" displayName="Annotated GO ID"/>
            <attributeCategory name="predgoids" displayName="Predicted GO ID"/>
          </attributeCategory>
          <attributeCategory name="ecnum" displayName="EC Numbers">
            <attributeCategory name="annotecs" displayName="Annotated EC Numbers"/>
            <attributeCategory name="derivedecs" displayName="EC Numbers from OrthoMCL"/>
          </attributeCategory>
        </attributeCategory>
        <attributeCategory name="transProtSeq" displayName="Transcript and Protein Sequences">
          <attributeCategory name="transSeq" displayName="Transcript"/>
          <attributeCategory name="protSeq" displayName="Protein"/>
        </attributeCategory>
      </attributeCategory>
    </attributeCategories>



            <testParamValues includeProjects="PlasmoDB">
               <paramValue name="source_id">%%defaultGene%%</paramValue>
               <paramValue name="project_id">PlasmoDB</paramValue>
            </testParamValues>

            <testParamValues includeProjects="ToxoDB">
               <paramValue name="source_id">TGME49_221330</paramValue>
               <paramValue name="project_id">ToxoDB</paramValue>
            </testParamValues>

            <testParamValues includeProjects="CryptoDB">
               <paramValue name="source_id">cgd3_1400</paramValue>
               <paramValue name="project_id">CryptoDB</paramValue>
            </testParamValues>

            <testParamValues includeProjects="GiardiaDB">
               <paramValue name="source_id">GL50803_112048</paramValue>
               <paramValue name="project_id">GiardiaDB</paramValue>
            </testParamValues>

            <testParamValues includeProjects="TrichDB">
               <paramValue name="source_id">%%defaultGene%%</paramValue>
               <paramValue name="project_id">TrichDB</paramValue>
            </testParamValues>

            <!--TODO revisit source_id. its correct but random-->
            <testParamValues includeProjects="TriTrypDB">
               <paramValue name="source_id">Tc00.1047053505807.140</paramValue>
               <paramValue name="project_id">TriTrypDB</paramValue>
            </testParamValues>

            <testParamValues includeProjects="AmoebaDB">
               <paramValue name="source_id">%%defaultGene%%</paramValue>
               <paramValue name="project_id">AmoebaDB</paramValue>
            </testParamValues>

            <testParamValues includeProjects="MicrosporidiaDB">
               <paramValue name="source_id">ECU07_1760</paramValue>
               <paramValue name="project_id">MicrosporidiaDB</paramValue>
            </testParamValues>

            <testParamValues includeProjects="PiroplasmaDB">
               <paramValue name="source_id">BBOV_IV003850</paramValue>
               <paramValue name="project_id">PiroplasmaDB</paramValue>
            </testParamValues>

            <testParamValues includeProjects="HostDB">
               <paramValue name="source_id">%%defaultGene%%</paramValue>
               <paramValue name="project_id">HostDB</paramValue>
            </testParamValues>

            <testParamValues includeProjects="FungiDB,SchistoDB,InitDB">
               <paramValue name="source_id"></paramValue>
               <paramValue name="project_id"></paramValue>
            </testParamValues>

            
          <!-- =============================================================== -->
          <!--  primary key definition -->  
          <!-- =============================================================== -->
          
            <primaryKeyAttribute name="primary_key"
                                 displayName="Gene ID"
                                 aliasPluginClassName="org.apidb.apicommon.model.GenePrimaryKeyAliasPlugin"
                                 attributeCategory="deep">

	      <!-- order here matters: gene_source_id must come first for proper sorting -->
                <columnRef>gene_source_id</columnRef>
                <columnRef>source_id</columnRef>
                <columnRef>project_id</columnRef>
                <text>
                    <![CDATA[
                    $$gene_source_id$$
                    ]]>
                </text>                
            </primaryKeyAttribute>
            
          <!-- =============================================================== -->
          <!--  define the attribute field that will be used as -->  
          <!-- =============================================================== -->
          <favorite noteField="gene_product" />
          
          
            
      <!-- =============================================================== -->
      <!--  Default summary attributes and sorting attributes -->  
      <!-- =============================================================== -->
<!--              summary="representative_transcript,gene_location_text,gene_product,old_ids" -->            
         <attributesList includeProjects="ToxoDB"
              summary="representative_transcript,gene_location_text,gene_product"
              sorting="gene_location_text asc"
         />
          <attributesList includeProjects="EuPathDB"
              summary="organism,gene_location_text,gene_product"
              sorting="organism asc,gene_location_text asc"
         />

         <attributesList excludeProjects="EuPathDB,ToxoDB"
              summary="gene_location_text,gene_product"
              sorting="gene_location_text asc"
         />


      <!-- =============================================================== -->
      <!--   Filters -->  
      <!-- =============================================================== -->


        <!-- This filter gets all gene instances for each project -->

        <answerFilterLayout name="eupath_project" visible="true"
                            fileName="eupath_project_filter.jsp"
                            displayName="Filter results by component website" includeProjects="EuPathDB">
            <instanceRef ref="all_results" />            
            <instanceRef ref="amoebadb_instances" />
            <instanceRef ref="cryptodb_instances" />
            <instanceRef ref="fungidb_instances" /> 
            <instanceRef ref="giardiadb_instances" /> 
            <instanceRef ref="microspordb_instances" />
            <instanceRef ref="pirodb_instances" />
            <instanceRef ref="plasmodb_instances" />
            <instanceRef ref="toxodb_instances" /> 
            <instanceRef ref="trichdb_instances" />
            <instanceRef ref="tritrypdb_instances" />
        </answerFilterLayout>

        <answerFilterLayout name="gene_filters" visible="true"
                            fileName="geneFilterTableLayout2.jsp"
                            displayName="Click on a number in this table to limit/filter your results" includeProjects="AmoebaDB,CryptoDB,FungiDB,GiardiaDB,MicrosporidiaDB,PiroplasmaDB,PlasmoDB,ToxoDB,TrichDB,TriTrypDB,EuPathDB">
            <instanceRef ref="all_results" />
            <instanceRef ref="all_ortholog_groups" />

<!--
 filter names are determined in /Model/lib/dst/ geneFilter templates

 Assuming a species name contains one space: eg: "speciesPart1 speciesPart2" (eg: "sp. 1")
 - instance filter names are:
     family-speciesPart1=speciesPart2_orgAbbrev_instances
 - distinct filter names are:
     family-speciesPart1=speciesPart2_AA_distinct_gene_instances
 
 family, species, and orgAbbrev are provided by the injector, coming primarily from the datasets xml file; 
     we only take from the presenters file the *species names hat contain spaces* (via the prop: "optionalSpecies"). 

 The jsp will determine the html table based on the bean counts WDK generates and these filter names.

 _AA_ is included to force distinct filters to be sorted on top.

 Also we are assuming :
     family and species names do not contain spaces 
       (if species name contains spaces (eg "sp. 1"), use property optionalSpecies in presenters)
     family and species names do not contain "_" (underscore)  nor "-" (dash) 
       (if species contains dash, it wont show correct in filters)
     species names do not contain "=" (equal)  
       (if species contains equal, it wont show correct in filters)

 UPDATE Jan 2015: for Fungi we include *phylum* names in injector, before family. 
     phylum should not contains spaces, dash or underscores
     currently the phylum for Fungi included (hardcoded) in injector
-->


            <!-- TEMPLATE_ANCHOR geneFilterLayout -->
            <!-- TEMPLATE_ANCHOR distinctGeneFilterLayout -->
        </answerFilterLayout>

        <answerFilterLayout name="gene_filters" visible="true"
                            fileName="host_filters.jsp"
                            displayName="Filter results by species" includeProjects="HostDB">
	  <instanceRef ref="all_results" />
	  <instanceRef ref="all_ortholog_groups" />
	  <instanceRef ref="hsap_gene_instances"/>
	  <instanceRef ref="mmus_gene_instances"/>
	  <instanceRef ref="hsapREF_transcript_instances"/>
	  <instanceRef ref="mmusC57BL6J_transcript_instances"/>
        </answerFilterLayout>


        <answerFilterLayout name="toxo_advanced" visible="false"
                            fileName="toxo_advanced_filters.jsp"
                            displayName="Filter by strains (advanced)" includeProjects="ToxoDB">
            <instanceRef ref="all_min_gt1" />
            <instanceRef ref="all_min_me49" />
            <instanceRef ref="all_min_veg" />
            <instanceRef ref="gt1_min_me49" />
            <instanceRef ref="gt1_int_me49" />
            <instanceRef ref="me49_min_gt1" />
            <instanceRef ref="gt1_min_veg" />
            <instanceRef ref="gt1_int_veg" />
            <instanceRef ref="veg_min_gt1" />
            <instanceRef ref="me49_min_veg" />
            <instanceRef ref="me49_int_veg" />
            <instanceRef ref="veg_min_me49" />
        </answerFilterLayout>


        <answerFilterLayout name="giardia_advanced" visible="true"
                            fileName="giardia_advanced_filters.jsp"
                            displayName="Assemblage A Genes" includeProjects="GiardiaDB">
            <instanceRef ref="undeprecated_instances" />
            <instanceRef ref="deprecated_instances" />
        </answerFilterLayout>


      <!-- =============================================================== -->
      <!--   Filters -->  
      <!-- =============================================================== -->
            
            <answerFilter queryRef="GeneSummaries.BooleanExpansion"
                          includeProjects="ToxoDB">
                
                <instance name="boolean_expansion" 
                       booleanExpansion="true"> 
                    <displayName><![CDATA[Expand]]></displayName>
                    <description>
                        <![CDATA[
                            All instances from all genes in result
                        ]]>
                    </description>   
                </instance>
            </answerFilter>

            <answerFilter queryRef="GeneSummaries.AllResults" >
                      <instance name="all_results" default="true">
                    <displayName><![CDATA[All Results]]></displayName>
                    <description>
                        <![CDATA[
                            All results
                        ]]>
                    </description>   
                </instance>
            </answerFilter>

              <answerFilter queryRef="GeneSummaries.AllOrthologGroups" >
                
                <instance name="all_ortholog_groups">
                    <displayName><![CDATA[Ortholog Groups]]></displayName>
                    <description>
                        <![CDATA[
                            A representative from each ortholog group was chosen alphabetically by species. This number provides an indication of the relatedness of proteins in the result across all represented species.
                        ]]>
                    </description>   
                </instance>
                
            </answerFilter>

            <answerFilter queryRef="GeneSummaries.DistinctGenes"
                          includeProjects="AmoebaDB,CryptoDB,FungiDB,GiardiaDB,HostDB,MicrosporidiaDB,PiroplasmaDB,PlasmoDB,ToxoDB,TrichDB,TriTrypDB,HostDB,SchistoDB,InitDB,EuPathDB">

	      <!-- adding a dummy filter, for validation to work for sites that do not use the below template -->
                <instance name="NA" includeProjects="InitDB">
                    <displayName>NA</displayName>
                    <description></description>   
                </instance>

                <!-- TEMPLATE_ANCHOR distinctGeneFilter -->
		<instance name="hsap_gene_instances" includeProjects="HostDB">
		  <displayName><![CDATA[<i>Homo sapiens</i> Genes]]></displayName>
		  <description>
		    <![CDATA[
			     <i>Homo sapiens</i> genes.
		    ]]>
		  </description>
		  <paramValue name="species">Homo sapiens</paramValue>
		</instance>

		<instance name="mmus_gene_instances" includeProjects="HostDB">
		  <displayName><![CDATA[<i>Mus musculus</i> Genes]]></displayName>
		  <description>
		    <![CDATA[
			     <i>Mus musculus</i> genes.
		    ]]>
		  </description>
		  <paramValue name="species">Mus musculus</paramValue>
		</instance>

            </answerFilter>



 <answerFilter queryRef="GeneSummaries.ApiProjectInstances"
                          includeProjects="EuPathDB">

                <instance name="cryptodb_instances">
                    <displayName><![CDATA[CryptoDB]]></displayName>
                    <description>
                        <![CDATA[
                              genes in CryptoDB.
                            ]]>
                    </description>
                    <paramValue name="Project">CryptoDB</paramValue>
                </instance>

                <instance name="plasmodb_instances">
                    <displayName><![CDATA[PlasmoDB]]></displayName>
                    <description>
                        <![CDATA[
                              genes in PlasmoDB.
                            ]]>
                    </description>
                    <paramValue name="Project">PlasmoDB</paramValue>
                </instance>

                <instance name="toxodb_instances">
                    <displayName><![CDATA[ToxoDB]]></displayName>
                    <description>
                        <![CDATA[
                              ToxoDB results.
                            ]]>
                    </description>
                    <paramValue name="Project">ToxoDB</paramValue>
                </instance>

                <instance name="fungidb_instances">
                    <displayName><![CDATA[FungiDB]]></displayName>
                    <description>
                        <![CDATA[
                              genes in FungiDB.
                            ]]>
                    </description>
                    <paramValue name="Project">FungiDB</paramValue>
                </instance>

                <instance name="giardiadb_instances">
                    <displayName><![CDATA[GiardiaDB]]></displayName>
                    <description>
                        <![CDATA[
                              genes in GiardiaDB.
                            ]]>
                    </description>
                    <paramValue name="Project">GiardiaDB</paramValue>
                </instance>


                <instance name="trichdb_instances">
                    <displayName><![CDATA[TrichDB]]></displayName>
                    <description>
                        <![CDATA[
                              genes in TrichDB.
                            ]]>
                    </description>
                    <paramValue name="Project">TrichDB</paramValue>
                </instance>

                <instance name="tritrypdb_instances">
                    <displayName><![CDATA[TriTrypDB]]></displayName>
                    <description>
                        <![CDATA[
                              TriTrypDB results.
                            ]]>
                    </description>
                    <paramValue name="Project">TriTrypDB</paramValue>
                </instance>

                <instance name="amoebadb_instances">
                    <displayName><![CDATA[AmoebaDB]]></displayName>
                    <description>
                        <![CDATA[
                              genes in AmoebaDB.
                            ]]>
                    </description>
                    <paramValue name="Project">AmoebaDB</paramValue>
                </instance>
                <instance name="microspordb_instances">
                    <displayName><![CDATA[MicrosporidiaDB]]></displayName>
                    <description>
                        <![CDATA[
                              genes in MicrosporidiaDB.
                            ]]>
                    </description>
                    <paramValue name="Project">MicrosporidiaDB</paramValue>
                </instance>

                <instance name="pirodb_instances">
                    <displayName><![CDATA[PiroplasmaDB]]></displayName>
                    <description>
                        <![CDATA[
                              PiroplasmaDB results.
                            ]]>
                    </description>
                    <paramValue name="Project">PiroplasmaDB</paramValue>
                </instance>


</answerFilter>

    <answerFilter queryRef="GeneSummaries.OrganismGeneInstances"
                          includeProjects="AmoebaDB,CryptoDB,FungiDB,GiardiaDB,HostDB,MicrosporidiaDB,PiroplasmaDB,PlasmoDB,ToxoDB,TrichDB,TriTrypDB,EuPathDB,SchistoDB,InitDB">

	      <!-- adding a dummy filter, for validation to work for sites that do not use the below template -->
                <instance name="NA" includeProjects="InitDB">
                    <displayName>NA</displayName>
                    <description></description>   
                </instance>


                <!-- TEMPLATE_ANCHOR geneFilter -->
		<instance name="hsapREF_transcript_instances" includeProjects="HostDB">
		  <displayName> <![CDATA[<i>Homo sapiens</i> Transcripts]]></displayName>
		  <description>
		    <![CDATA[
			     All <i>Homo sapiens</i> transcripts
		    ]]>
		  </description>
		  <paramValue name="organism">Homo sapiens</paramValue>
		</instance>

		<instance name="mmusC57BL6J_transcript_instances" includeProjects="HostDB">
		  <displayName> <![CDATA[<i>Mus musculus C57BL6J</i> Transcripts]]></displayName>
		  <description>
		    <![CDATA[
			     All <i>Mus musculus C57BL6J</i> transcripts
		    ]]>
		  </description>
		  <paramValue name="organism">Mus musculus C57BL6J</paramValue>
		</instance>
		
    </answerFilter>

            <!-- HOST -->
	    <answerFilter queryRef="GeneSummaries.OrganismGeneInstances"
                          includeProjects="HostDB">
                <instance name="hsap_instances">
                    <displayName><![CDATA[<i>Homo sapiens</i>]]></displayName>
                    <description>
                     <![CDATA[
                       All <i>Homo sapiens</i> results
                     ]]>
                    </description>   
                    <paramValue name="organism">Homo sapiens</paramValue>
                </instance>
                <instance name="mmus_instances">
                    <displayName><![CDATA[<i>Mus musculus</i>]]></displayName>
                    <description>
                     <![CDATA[
                       All <i>Mus musculus</i> results
                     ]]>
                    </description>   
                    <paramValue name="organism">Mus musculus C57BL6J</paramValue>
                </instance>
            </answerFilter>

            <!-- GIARDIA ALL and DEPRECATED; why do we need all? -->
            <answerFilter queryRef="GeneSummaries.DeprecatedGenes"
                          includeProjects="GiardiaDB,EuPathDB">
                
                    <instance name="undeprecated_instances">
                    <displayName><![CDATA[All Giardia Genes]]></displayName>
                    <description>
                        <![CDATA[
                              all <i>Giardia Assemblage A</i> isolate WB genes (undeprecated).
                            ]]>
                    </description>   
                    <paramValue name="deprecated_genes">genes</paramValue>
                </instance>
                <instance name="deprecated_instances">
                    <displayName><![CDATA[Deprecated Genes]]></displayName>
                    <description>
                        <![CDATA[
                              <i>Giardia Assemblage A</i> isolate WB deprecated genes. <br>These are previously annotated genes that newer annotation has shown to have insufficient evidence.
                            ]]>
                    </description>   
                    <paramValue name="deprecated_genes">deprecated_genes</paramValue>
                </instance>
            </answerFilter>

            <!-- all_tg_results ... why do we need this? -->
            <answerFilter queryRef="GeneSummaries.AllTgResults"
                          includeProjects="ToxoDB,EuPathDB">
                
                <instance name="all_tg_results">
                    <displayName><![CDATA[<i>Tg</i> Results]]></displayName>
                    <description>
                        <![CDATA[
                            All <i>T. gondii</i> results
                        ]]>
                    </description>   
                </instance>
                
            </answerFilter>


            <!-- This could be better named.  Distinct genes w/in a Strain (pickes one paralog) -->
            <answerFilter queryRef="GeneSummaries.TgStrainGenes"
                          includeProjects="ToxoDB">
                
                <instance name="gt1_genes">
                    <displayName><![CDATA[Tg GT1 Genes]]></displayName>
                    <description>
                        <![CDATA[
                            Number of Tg GT1 genes 
                        ]]>
                    </description>   
                    <paramValue name="organism">Toxoplasma gondii GT1</paramValue>
                </instance>
                
                <instance name="me49_genes">
                    <displayName><![CDATA[Tg ME49 Genes]]></displayName>
                    <description>
                        <![CDATA[
                            Number of Tg ME49 genes 
                        ]]>
                    </description>   
                    <paramValue name="organism">Toxoplasma gondii ME49</paramValue>
                </instance>
                
                <instance name="veg_genes">
                    <displayName><![CDATA[Tg VEG Genes]]></displayName>
                    <description>
                        <![CDATA[
                            Number of Tg VEG genes 
                        ]]>
                    </description>   
                    <paramValue name="organism">Toxoplasma gondii VEG</paramValue>
                </instance>

                <instance name="rh_genes">
                    <displayName><![CDATA[Tg RH Genes]]></displayName>
                    <description>
                        <![CDATA[
                            Number of Tg RH genes 
                        ]]>
                    </description>   
                    <paramValue name="organism">Toxoplasma gondii RH</paramValue>
                </instance>
                
            </answerFilter>

            <answerFilter queryRef="GeneSummaries.DetailsTgAllMinus"
                          includeProjects="ToxoDB">
                
                <instance name="all_min_gt1">
                    <displayName><![CDATA[All Minus GT1]]></displayName>
                      <paramValue name="organism">Toxoplasma gondii GT1</paramValue>
                    <description>
                        <![CDATA[
                            <i>T. gondii</i> genes without a GT1 result
                        ]]>
                    </description>      
                </instance>
                <instance name="all_min_me49">
                    <displayName><![CDATA[All Minus ME49]]></displayName>
                      <paramValue name="organism">Toxoplasma gondii ME49</paramValue>
                    <description>
                        <![CDATA[
                            <i>T. gondii</i> genes without a ME49 result
                        ]]>
                    </description>      
                </instance>
                <instance name="all_min_veg">
                    <displayName><![CDATA[All Minus VEG]]></displayName>
                      <paramValue name="organism">Toxoplasma gondii VEG</paramValue>
                    <description>
                        <![CDATA[
                            <i>T. gondii</i> genes without a VEG result
                        ]]>
                    </description>      
                </instance>

            </answerFilter>

            <answerFilter queryRef="GeneSummaries.DetailsTgStrainMinus"
                          includeProjects="ToxoDB">
                
                <instance name="gt1_min_me49">
                    <displayName><![CDATA[GT1 Minus ME49]]></displayName>
                      <paramValue name="organism">Toxoplasma gondii GT1</paramValue>
                      <paramValue name="organism_b">Toxoplasma gondii ME49</paramValue>
                    <description>
                        <![CDATA[
                            Genes that have a GT1 result but not an ME49 result
                        ]]>
                    </description>      
                </instance>
                <instance name="gt1_min_veg">
                    <displayName><![CDATA[GT1 Minus VEG]]></displayName>
                      <paramValue name="organism">Toxoplasma gondii GT1</paramValue>
                      <paramValue name="organism_b">Toxoplasma gondii VEG</paramValue>
                    <description>
                        <![CDATA[
                            Genes that have a GT1 result but not a VEG result
                        ]]>
                    </description>      
                </instance>
                <instance name="me49_min_gt1">
                    <displayName><![CDATA[ME49 Minus GT1]]></displayName>
                      <paramValue name="organism">Toxoplasma gondii ME49</paramValue>
                      <paramValue name="organism_b">Toxoplasma gondii GT1</paramValue>
                    <description>
                        <![CDATA[
                            Genes that have an ME49 result but not a GT1 result
                        ]]>
                    </description>      
                </instance>
                <instance name="me49_min_veg">
                    <displayName><![CDATA[ME49 Minus VEG]]></displayName>
                      <paramValue name="organism">Toxoplasma gondii ME49</paramValue>
                      <paramValue name="organism_b">Toxoplasma gondii VEG</paramValue>
                    <description>
                        <![CDATA[
                            Genes that have an ME49 result but not a VEG result
                        ]]>
                    </description>      
                </instance>
                <instance name="veg_min_gt1">
                    <displayName><![CDATA[VEG Minus GT1]]></displayName>
                      <paramValue name="organism">Toxoplasma gondii VEG</paramValue>
                      <paramValue name="organism_b">Toxoplasma gondii GT1</paramValue>
                    <description>
                        <![CDATA[
                            Genes that have a VEG result but not a GT1 result
                        ]]>
                    </description>      
                </instance>
                <instance name="veg_min_me49">
                    <displayName><![CDATA[VEG Minus ME49]]></displayName>
                      <paramValue name="organism">Toxoplasma gondii VEG</paramValue>
                      <paramValue name="organism_b">Toxoplasma gondii ME49</paramValue>
                    <description>
                        <![CDATA[
                            Genes that have a VEG result but not an ME49 result
                        ]]>
                    </description>      
                </instance>

            </answerFilter>

            <answerFilter queryRef="GeneSummaries.DetailsTgStrainIntersect"
                          includeProjects="ToxoDB">
                
                <instance name="gt1_int_me49">
                    <displayName><![CDATA[GT1 Intersect ME49]]></displayName>
                      <paramValue name="organism">Toxoplasma gondii GT1</paramValue>
                      <paramValue name="organism_b">Toxoplasma gondii ME49</paramValue>
                    <description>
                        <![CDATA[
                            Genes that have both GT1 and ME49 results
                        ]]>
                    </description>      
                </instance>


                <instance name="gt1_int_veg">
                    <displayName><![CDATA[GT1 Intersect VEG]]></displayName>
                      <paramValue name="organism">Toxoplasma gondii GT1</paramValue>
                      <paramValue name="organism_b">Toxoplasma gondii VEG</paramValue>
                    <description>
                        <![CDATA[
                            Genes that have both GT1 and VEG results
                        ]]>
                    </description>      
                </instance>


                <instance name="me49_int_veg">
                    <displayName><![CDATA[ME49 Intersect VEG]]></displayName>
                      <paramValue name="organism">Toxoplasma gondii ME49</paramValue>
                      <paramValue name="organism_b">Toxoplasma gondii VEG</paramValue>
                    <description>
                        <![CDATA[
                            Genes that have both ME49 and VEG results
                        ]]>
                    </description>      
                </instance>

            </answerFilter>

      <!-- =============================================================== -->
      <!--  Step Filters -->
      <!-- =============================================================== -->
 
            <filterRef name="transcriptFilters.representativeTranscriptOnly"/>
            <filterRef name="transcriptFilters.matchedTranscriptFilter"/>

       <!-- =============================================================== -->
       <!--  Summary & record views -->
       <!-- =============================================================== -->
 <!--
             <summaryView name="_default" display="Gene Results"
                          jsp="/wdkCustomization/jsp/results/gene-view.jsp"
                          handlerClass="org.apidb.apicommon.model.view.GeneViewHandler">
                 <description>
                     <![CDATA[
                         View genes in this search result.
                     ]]>
                 </description>
             </summaryView>

             <summaryView name="transcript-view" display="Transcript Results"
-->
             <summaryView name="_default" display="Gene Results"
                          jsp="/wdkCustomization/jsp/results/transcript-view.jsp"
                          handlerClass="org.apidb.apicommon.model.view.TranscriptViewHandler">
                 <description>
                     <![CDATA[
                         View transcripts.
                     ]]>
                 </description>
             </summaryView>
             <!-- previous name:  missing-transcripts-view; 
                  new name == resultPropertyQueryRef above with count....
                      this allows us to make a decision in the jsp if to show the tab or not-->
             <!-- not needed : UX meet Oct 1 2015, 
             <summaryView name="genesMissingTranscripts" display="Residual Transcripts"
                          jsp="/wdkCustomization/jsp/results/missing-transcripts-view.jsp"
                          handlerClass="org.apidb.apicommon.model.view.MissingTranscriptsViewHandler">
                 <description>
                     <![CDATA[
                         View the residual transcripts from this result. These are transcripts from genes in your result that were not returned by the search.
                     ]]>
                 </description>
             </summaryView>
            -->
             <summaryView name="genomic-view" display="Genome View"
                          jsp="/wdkCustomization/jsp/results/genome-view.jsp"
                          handlerClass="org.apidb.apicommon.model.view.genome.GeneGenomeViewHandler">
                 <description>
                     <![CDATA[
                         View your hits mapped to their corresponding largest assembled genomic DNA segment, often a chromosome, but
 sometimes a contig or scaffold.
                     ]]>
                 </description>
             </summaryView> 

      <!-- =============================================================== -->
      <!--  Step Analysis Plugins -->
      <!-- =============================================================== -->

             <stepAnalysisRef name="go-enrichment" excludeProjects="EuPathDB"/>
             <stepAnalysisRef name="pathway-enrichment" excludeProjects="EuPathDB"/>
             <stepAnalysisRef name="word-enrichment"/>

             <!-- Sample/test plugins 
             <stepAnalysisRef name="long-running-test"/>
             <stepAnalysisRef name="result-counter"/>
             <stepAnalysisRef name="form-test"/>
             <stepAnalysisRef name="process-test"/>
             <stepAnalysisRef name="checkbox-tree-test"/>
             -->

      <!-- =============================================================== -->
      <!--   Reporters -->  
      <!-- =============================================================== -->


        <reporter name="attributesTabular" displayName="%%attributesReporterDisplayName%%" scopes="results"
                    implementation="org.apidb.apicommon.model.report.TranscriptAttributesReporter">
             <property name="page_size">500</property>
          </reporter>

         <reporter name="tableTabular" displayName="%%tableReporterDisplayName%%" scopes="results"
                    implementation="org.apidb.apicommon.model.report.TranscriptTableReporter">
          </reporter>


          <reporter name="srt" displayName="FASTA (sequence retrieval, configurable)" scopes="results, record"
                    implementation="org.apidb.apicommon.model.report.FastaGeneReporter"/>
                    
          <reporter name="gff3" displayName="GFF3: Gene models and optional sequences"    scopes="results, record"
                    implementation="org.apidb.apicommon.model.report.Gff3CachedReporter">
              <property name="table_cache">apidb.GeneGff</property>
              <property name="project_id_column">project_id</property>
              <property name="record_id_column">source_id</property>
              <property name="gff_record">gff_record</property>
              <property name="gff_protein">gff_protein</property>
              <property name="gff_transcript">gff_transcript</property>
          </reporter>

          <!-- the report maker used on commandline to generate gff download files -->
          <reporter name="gff3Dump" displayName="Summary - GFF3" scopes=""
                    inReportMaker="false"
                    implementation="org.apidb.apicommon.model.report.Gff3Reporter">
              <property name="table_cache">apidb.GeneGff</property>
              <property name="project_id_column">project_id</property>
              <property name="record_id_column">source_id</property>
              <property name="gff_record">gff_record</property>
              <property name="gff_protein">gff_protein</property>
              <property name="gff_transcript">gff_transcript</property>
          </reporter>
                    
      <reporter name="xml" displayName="XML: choose from columns and/or tables" excludeProjects="EuPathDB"  scopes=""
                    implementation="org.gusdb.wdk.model.report.XMLReporter" />

      <reporter name="json" displayName="json: choose from columns and/or tables" excludeProjects="EuPathDB"  scopes=""
                    implementation="org.gusdb.wdk.model.report.JSONReporter" />

          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
          <!-- BFMV attributes -->  
          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
            
          <attributeQueryRef ref="TranscriptAttributes.Bfmv">
            <columnAttribute name="project_id" internal="true" inReportMaker="false" attributeCategory="ids"/>
            <columnAttribute name="lc_project_id" internal="true" inReportMaker="false" attributeCategory="ids"/>
            <columnAttribute name="source_id" displayName="Transcript ID" internal="true" inReportMaker="true" attributeCategory="tranattribs"/>

            <linkAttribute name="transcript_link" displayName="Transcript ID" inReportMaker="false" attributeCategory="tranattribs">
              <displayText>
                <![CDATA[ $$source_id$$ ]]>
              </displayText>
              <url>
                <![CDATA[ @WEBAPP_BASE_URL@/record/gene/$$gene_source_id$$ ]]>
              </url>
            </linkAttribute>

	    <!-- GENE attributes -->
            <columnAttribute name="gene_source_id" displayName="Gene ID" internal="true"  inReportMaker="false" attributeCategory="ids"/>
            <columnAttribute displayName="Genomic Sequence ID" name="sequence_id" attributeCategory="ids"/>

            <columnAttribute displayName="Chromosome" name="chromosome" attributeCategory="position">
                 <plugin name="wordCloud" display="Word Cloud"
                      description="Display the terms in the attribute as word clouds"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.WordCloudAttributePlugin"
                      view="/wdk/jsp/results/wordCloud.jsp">
                     <property name="min-word-length">1</property>
                     <property name="exclude-numbers">false</property>
                     <property name="split-pattern"><![CDATA[,]]></property>
                 </plugin>
                 <!--
                 <filterRef name="WdkFilters.WdkListColumnFilter"/>
                 -->
            </columnAttribute>

            <columnAttribute name="gene_product" displayName="Product Description" internal="false" help="Protein Product for this gene" attributeCategory="summary">
              <plugin name="wordCloud" display="Word Cloud"
                      description="Display the terms in the attribute as word clouds"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.WordCloudAttributePlugin"
                      view="/wdk/jsp/results/wordCloud.jsp" />
            </columnAttribute>

            <textAttribute name="organism" displayName="Organism" internal="false" inReportMaker="true" 
               help="The biological sample used to sequence this genome" attributeCategory="summary">
               <display><![CDATA[ <i>$$organism_text$$</i>  ]]></display>
               <text><![CDATA[ $$organism_text$$  ]]></text>
            </textAttribute>

            <columnAttribute name="gene_type" displayName="Gene Type" internal="false" help="Gene Product Categories" attributeCategory="summary"/>

            <textAttribute name="gene_location_text" displayName="Genomic Location (Gene)" help="Contig/Chromosome:start-end(strand)" attributeCategory="summary">
             <display>
                  <![CDATA[
                  $$sequence_id$$:$$gene_start_min_text$$..$$gene_end_max_text$$($$strand_plus_minus$$)
                  ]]>
              </display>
              <text>
                  <![CDATA[
                  $$sequence_id$$:$$gene_start_min_text$$..$$gene_end_max_text$$($$strand_plus_minus$$)
                  ]]>
              </text>
            </textAttribute>

            <columnAttribute name="gene_name" displayName="Gene Name or Symbol" internal="false" attributeCategory="ids"
                             inReportMaker="true" align="center" excludeProjects="EuPathDB"/>
            <columnAttribute name="gene_exon_count" displayName="# Exons in Gene" internal="false" help="Total number of Exons"
                             inReportMaker="true" align="center" attributeCategory="summary">
              <plugin name="histogram" display="Histogram"
                      description="Display the histogram of the values of this attribute"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                     view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>

            <columnAttribute name="is_pseudo" displayName="Is Pseudo" inReportMaker="true" attributeCategory="summary"/>

            <columnAttribute name="gene_transcript_count" displayName="# Transcripts" align="center" help="Total number of transcripts annotated in this gene." attributeCategory="geneattribs">
                   <plugin name="histogram" display="Histogram"
                              description="Display the histogram of the values of this attribute"
                              implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                              view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>

            <columnAttribute name="is_deprecated" displayName="Deprecated?" align="center" includeProjects="GiardiaDB"/>
            <columnAttribute name="is_deprecated" internal="true" inReportMaker="false" displayName="Deprecated?" align="center" excludeProjects="GiardiaDB"/>

            <columnAttribute name="gene_ortholog_number" displayName="Ortholog count" align="center" help="Number of Orthologs within this database" attributeCategory="evolution">
                     <plugin name="histogram" display="Histogram"
                              description="Display the histogram of the values of this attribute"
                              implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                              view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>

            <columnAttribute name="gene_paralog_number" displayName="Paralog count" align="center" help="Number of Paralogs within this database" attributeCategory="evolution">
                   <plugin name="histogram" display="Histogram"
                              description="Display the histogram of the values of this attribute"
                              implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                              view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>

            <columnAttribute name="gene_orthomcl_name" displayName="Ortholog Group" internal="true" inReportMaker="true" help="orthomcl.org identifier OR other identifier for a group of orthologs" attributeCategory="evolution"/>
            <columnAttribute name="orthomcl_link" displayName="Ortholog Group" inReportMaker="false" help="orthomcl.org identifier OR other identifier for a group of orthologs" attributeCategory="evolution" truncateTo="4000">
                 <plugin name="wordCloud" display="Word Cloud"
                      description="Display the terms in the attribute as word clouds"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.WordCloudAttributePlugin"
                      view="/wdk/jsp/results/wordCloud.jsp" />
           </columnAttribute>


            <columnAttribute name="gene_total_hts_snps" displayName="Total SNPs All Strains" includeProjects="PlasmoDB,ToxoDB,PiroplasmaDB,GiardiaDB,AmoebaDB,CryptoDB,TriTrypDB,FungiDB" align="center" help="SNPs are from high throughput resequencing only." attributeCategory="popbio"/>
            <columnAttribute name="gene_hts_nonsynonymous_snps" displayName="NonSynonymous SNPs All Strains" includeProjects="PlasmoDB,ToxoDB,PiroplasmaDB,GiardiaDB,AmoebaDB,CryptoDB,TriTrypDB,FungiDB" align="center" help="SNPs are from high throughput resequencing only." attributeCategory="popbio"/>
            <columnAttribute name="gene_hts_synonymous_snps" displayName="Synonymous SNPs All Strains" includeProjects="PlasmoDB,ToxoDB,PiroplasmaDB,GiardiaDB,AmoebaDB,CryptoDB,TriTrypDB,FungiDB" align="center" help="SNPs are from high throughput resequencing only." attributeCategory="popbio"/>


            <columnAttribute name="gene_hts_noncoding_snps" displayName="Non-Coding SNPs All Strains" includeProjects="PlasmoDB,ToxoDB,PiroplasmaDB,GiardiaDB,AmoebaDB,CryptoDB,TriTrypDB,FungiDB" align="center" help="SNPs are from high throughput resequencing only." attributeCategory="popbio"/>

            <columnAttribute name="gene_hts_stop_codon_snps" displayName="SNPs with Stop Codons All Strains" includeProjects="PlasmoDB,ToxoDB,PiroplasmaDB,GiardiaDB,AmoebaDB,CryptoDB,TriTrypDB,FungiDB" align="center" help="SNPs are from high throughput resequencing only." attributeCategory="popbio"/>


            <columnAttribute name="gene_hts_nonsyn_syn_ratio" displayName="NonSyn/Syn SNP Ratio All Strains" includeProjects="PlasmoDB,ToxoDB,PiroplasmaDB,GiardiaDB,AmoebaDB,CryptoDB,TriTrypDB,FungiDB" align="center" help="SNPs are from high throughput resequencing only." attributeCategory="popbio"/> 

	    <!-- uniprot and entrez -->
            <columnAttribute name="gene_uniprot_id" displayName="UniProt ID" internal="true" inReportMaker="true" attributeCategory="ids"/>
            <columnAttribute name="gene_uniprot_id_internal" displayName="UniProt ID" internal="true" inReportMaker="false" />
            <linkAttribute name="uniprot_link" displayName="UniProt ID" inReportMaker="false" sortable="false" attributeCategory="ids">
                <displayText>
                    <![CDATA[$$gene_uniprot_id$$]]>
                </displayText>
                <url>
                    <![CDATA[http://www.uniprot.org/uniprot/?query=$$gene_uniprot_id_internal$$]]>
                </url>
            </linkAttribute>
            <columnAttribute name="gene_entrez_id" displayName="Entrez Gene ID" internal="true" inReportMaker="true" attributeCategory="ids"/>
            <linkAttribute name="gene_entrez_link" displayName="Entrez Gene ID" inReportMaker="false" sortable="false" attributeCategory="ids" excludeProjects="EuPathDB">
                <displayText>
                    <![CDATA[$$gene_entrez_id$$]]>
                </displayText>
                <url>
                    <![CDATA[http://www.ncbi.nlm.nih.gov/gene/?term=$$gene_entrez_id$$]]>
                </url>
            </linkAttribute>

 
	    <!-- TRANSCRIPT attributes -->
            <columnAttribute name="transcript_product" displayName="Transcript Product Description" internal="false" help="Protein Product for this gene" attributeCategory="tranattribs"/>
            <columnAttribute name="transcript_length" displayName="Transcript Length" internal="false" help="Number of nucleotides which are transcribed" attributeCategory="tranattribs"/>
            <columnAttribute name="exon_count" displayName="# Exons in Transcript" internal="false" help="Total number of Exons"
                             inReportMaker="true" align="center" attributeCategory="tranattribs">
              <plugin name="histogram" display="Histogram"
                      description="Display the histogram of the values of this attribute"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                     view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
            <columnAttribute displayName="Data Source" name="external_db_name" internal="true" inReportMaker="false" attributeCategory="ids"/>

            <columnAttribute name="strand" displayName="Gene Strand" internal="false" help="Strand defines the direction of the gene relative to the contig" attributeCategory="position">
              <plugin name="histogram" display="Histogram"
                      description="Display the histogram of the values of this attribute"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                     view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>



	    <!--  PROTEIN attributes -->
            <columnAttribute name="protein_length" displayName="Protein Length" internal="false" help="Number of amino acids for the protein" attributeCategory="profeatures"/>

            <columnAttribute name="tm_count" displayName="# TM Domains" internal="false" help="Numer of transmembrane domains for the protein"
                             inReportMaker="true" align="center" attributeCategory="profeatures">
                      <plugin name="histogram" display="Histogram"
                              description="Display the histogram of the values of this attribute"
                              implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                              view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
            <columnAttribute name="molecular_weight" displayName="Molecular Weight" align="center" help="Molecular Weight of the protein in Daltons" attributeCategory="proattribs"/>

            <columnAttribute name="isoelectric_point" displayName="Isoelectric Point" align="center" attributeCategory="proattribs"/>
            <!-- signal peptides -->
            <columnAttribute name="signalp_scores" displayName="SignalP Scores" help="Neural Network and HMM Scores" attributeCategory="profeatures" sortable="false"/>
            <columnAttribute name="signalp_peptide" displayName="SignalP Peptide" help="Minimum NN Conclusion Score = 3 OR Minimum NN-D-Score = 0.5 OR Minimum HMM Signal Probability = 0.5" attributeCategory="profeatures" sortable="false"/>

	    <!-- go terms -->
            <columnAttribute name="annotated_go_function" displayName="Annotated GO Functions" help="GO function assignments provided by sequencing centers" attributeCategory="annotgoterms" sortable="false">
              <plugin name="wordCloud" display="Word Cloud"
                      description="Display the terms in the attribute as word clouds"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.WordCloudAttributePlugin"
                      view="/wdk/jsp/results/wordCloud.jsp" />
            </columnAttribute>
            <columnAttribute name="annotated_go_process" displayName="Annotated GO Processes" help="GO process assignments provided by sequencing centers" attributeCategory="annotgoterms" sortable="false">
              <plugin name="wordCloud" display="Word Cloud"
                      description="Display the terms in the attribute as word clouds"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.WordCloudAttributePlugin"
                      view="/wdk/jsp/results/wordCloud.jsp" />
            </columnAttribute>
            <columnAttribute name="annotated_go_component" displayName="Annotated GO Components" help="GO component assignments provided by sequencing centers" attributeCategory="annotgoterms" sortable="false">
              <plugin name="wordCloud" display="Word Cloud"
                      description="Display the terms in the attribute as word clouds"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.WordCloudAttributePlugin"
                      view="/wdk/jsp/results/wordCloud.jsp" />
            </columnAttribute>

            <columnAttribute name="predicted_go_function" displayName="Predicted GO Functions" help="GO function assignments generated by EuPathDB utilizing InterPro-to-GO" attributeCategory="predgoterms" sortable="false">
              <plugin name="wordCloud" display="Word Cloud"
                      description="Display the terms in the attribute as word clouds"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.WordCloudAttributePlugin"
                      view="/wdk/jsp/results/wordCloud.jsp" />
            </columnAttribute>
            <columnAttribute name="predicted_go_process" displayName="Predicted GO Processes" help="GO process assignments generated by EuPathDB utilizing InterPro-to-GO" attributeCategory="predgoterms" sortable="false">
              <plugin name="wordCloud" display="Word Cloud"
                      description="Display the terms in the attribute as word clouds"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.WordCloudAttributePlugin"
                      view="/wdk/jsp/results/wordCloud.jsp" />
            </columnAttribute>
            <columnAttribute name="predicted_go_component" displayName="Predicted GO Components" help="GO component assignments generated by EuPathDB utilizing InterPro-to-GO" attributeCategory="predgoterms" sortable="false">
              <plugin name="wordCloud" display="Word Cloud"
                      description="Display the terms in the attribute as word clouds"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.WordCloudAttributePlugin"
                      view="/wdk/jsp/results/wordCloud.jsp" />
            </columnAttribute>

	    <!-- go IDs -->
            <columnAttribute name="annotated_go_id_function" displayName="Annotated GO Function IDs" help="GO function assignments provided by sequencing centers" attributeCategory="annotgoids" sortable="false">
              <plugin name="wordCloud" display="Word Cloud"
                      description="Display the terms in the attribute as word clouds"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.WordCloudAttributePlugin"
                      view="/wdk/jsp/results/wordCloud.jsp" />
            </columnAttribute>
            <columnAttribute name="annotated_go_id_process" displayName="Annotated GO Process IDs" help="GO process assignments provided by sequencing centers" attributeCategory="annotgoids" sortable="false">
              <plugin name="wordCloud" display="Word Cloud"
                      description="Display the terms in the attribute as word clouds"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.WordCloudAttributePlugin"
                      view="/wdk/jsp/results/wordCloud.jsp" />
            </columnAttribute>
            <columnAttribute name="annotated_go_id_component" displayName="Annotated GO Component IDs" help="GO component assignments provided by sequencing centers" attributeCategory="annotgoids" sortable="false">
              <plugin name="wordCloud" display="Word Cloud"
                      description="Display the terms in the attribute as word clouds"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.WordCloudAttributePlugin"
                      view="/wdk/jsp/results/wordCloud.jsp" />
            </columnAttribute>

            <columnAttribute name="predicted_go_id_function" displayName="Predicted GO Function IDs" help="GO function assignments generated by EuPathDB utilizing InterPro-to-GO" attributeCategory="predgoids" sortable="false">
              <plugin name="wordCloud" display="Word Cloud"
                      description="Display the terms in the attribute as word clouds"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.WordCloudAttributePlugin"
                      view="/wdk/jsp/results/wordCloud.jsp" />
            </columnAttribute>
            <columnAttribute name="predicted_go_id_process" displayName="Predicted GO Process IDs" help="GO process assignments generated by EuPathDB utilizing InterPro-to-GO" attributeCategory="predgoids" sortable="false">
              <plugin name="wordCloud" display="Word Cloud"
                      description="Display the terms in the attribute as word clouds"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.WordCloudAttributePlugin"
                      view="/wdk/jsp/results/wordCloud.jsp" />
            </columnAttribute>
            <columnAttribute name="predicted_go_id_component" displayName="Predicted GO Component IDs" help="GO component assignments generated by EuPathDB utilizing InterPro-to-GO" attributeCategory="predgoids" sortable="false">
              <plugin name="wordCloud" display="Word Cloud"
                      description="Display the terms in the attribute as word clouds"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.WordCloudAttributePlugin"
                      view="/wdk/jsp/results/wordCloud.jsp" />
            </columnAttribute>

            <!-- EC numbers -->
            <columnAttribute name="ec_numbers" displayName="EC numbers" help="EC numbers provided by annotation centers or other data providers" attributeCategory="annotecs" sortable="false">
              <plugin name="wordCloud" display="Word Cloud"
                      description="Display the terms in the attribute as word clouds"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.WordCloudAttributePlugin"
                      view="/wdk/jsp/results/wordCloud.jsp" />
            </columnAttribute>
            <columnAttribute name="ec_numbers_derived" displayName="EC numbers from OrthoMCL" help="EC numbers derived based on consistency of annotated EC numbers withing OrthoMCL ortholog group" attributeCategory="derivedecs" sortable="false">
              <plugin name="wordCloud" display="Word Cloud"
                      description="Display the terms in the attribute as word clouds"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.WordCloudAttributePlugin"
                      view="/wdk/jsp/results/wordCloud.jsp" />
            </columnAttribute>
            

            <columnAttribute name="representative_transcript" displayName="Gene Group (representative gene)"
                             internal="false" align="center" includeProjects="ToxoDB,EuPathDB"/>


            <columnAttribute name="five_prime_utr_length" displayName="Annotated 5' UTR length" align="center" attributeCategory="geneattribs"/>
            <columnAttribute name="three_prime_utr_length" displayName="Annotated 3' UTR length" align="center" attributeCategory="geneattribs"/>



<!-- TO FIX for GUS4 -->
        <!-- TEMPLATE_ANCHOR rnaSeqExpressionGraphAttributes -->
        <!-- TEMPLATE_ANCHOR rnaSeqSsExpressionGraphAttributes -->
        <!-- TEMPLATE_ANCHOR spliceSitesExpressionGraphAttributes -->
        <!-- TEMPLATE_ANCHOR expressionGraphAttributesExpression -->
        <!-- TEMPLATE_ANCHOR expressionGraphAttributesPercentile -->


<!--
      <textAttribute name="pdb_blast_form" displayName="Search PDB by the protein sequence"
         inReportMaker="false" truncateTo="100000" sortable="false">
        <text>
          <![CDATA[
<form action='http://www.rcsb.org/pdb/search/smart.do' method='post' name="pdbform" target="_blank">
  <input type='hidden' name='smartSearchSubtype_0' value='SequenceQuery' />
  <input type='hidden' name='sequence_0' value='$$protein_sequence$$' />
  <input type='hidden' name='searchTool_0' value=='blast' />
  <input type='hidden' name='maskLowComplexity_0' value='yes' />
  <input type='hidden' name='eCutOff_0' value='10.0' />
  <input type='hidden' name='smartHomologueReductionPercent' value='90' />
  <input type='hidden' name='target' value='Current' />
  <input type='submit' class='link' value='Search PDB' title='Search PDB by the protein sequence of $$primary_key$$'/>
</form>
          ]]>
        </text>
      </textAttribute>
-->


            <!-- internal=true atts -->
            <columnAttribute name="project" internal="true" inReportMaker="false"/>
	    <!-- internal GENE attributes -->
            <columnAttribute name="gene_start_min" displayName="Start Location" internal="true" inReportMaker="false"/>
            <columnAttribute name="gene_start_min_text" displayName="Start Location" internal="true" inReportMaker="false"/>
            <columnAttribute name="gene_end_max" displayName="End Location" internal="true" inReportMaker="false"/>
            <columnAttribute name="gene_end_max_text" displayName="End Location" internal="true" inReportMaker="false"/>
            <columnAttribute name="gene_context_start" internal="true" inReportMaker="false"/>
            <columnAttribute name="gene_context_end" internal="true" inReportMaker="false"/>

            <columnAttribute name="pseudo_string" displayName="Pseudo" internal="true" inReportMaker="false"/>

	    <!-- internal TRANSCRIPT attributes -->
            <columnAttribute name="coding_start" internal="true" inReportMaker="false"/>
            <columnAttribute name="coding_end" internal="true" inReportMaker="false"/>
            <columnAttribute name="strand_plus_minus" displayName="Strand" internal="true" inReportMaker="false"/>
            <textAttribute name="location_text" displayName="Genomic Location (Transcript)" help="Contig/Chromosome:start-end(strand)" attributeCategory="summary">
             <display>
                  <![CDATA[
                  $$sequence_id$$:$$coding_start$$..$$coding_end$$($$strand_plus_minus$$)
                  ]]>
              </display>
              <text>
                  <![CDATA[
                  $$sequence_id$$:$$coding_start$$..$$coding_end$$($$strand_plus_minus$$)
                  ]]>
              </text>
            </textAttribute>


            <columnAttribute name="organism_text" displayName="Organism (Internal)" internal="true" inReportMaker="false"/>
            <columnAttribute name="organism_full" displayName="Organism" internal="true" inReportMaker="false"/>
            <columnAttribute name="genus_species" displayName="genus_species" internal="true" inReportMaker="false"/>
            <columnAttribute name="ncbi_tax_id" displayName="Taxonomy Id" internal="true" inReportMaker="false"/>
            <columnAttribute name="so_id" displayName="SO Id" internal="true" inReportMaker="false"/>
            <columnAttribute name="so_term_name" displayName="SO Term Name" internal="true" inReportMaker="false"/>
            <columnAttribute name="so_term_definition" displayName="SO Term Definition" internal="true" inReportMaker="false"/>
            <columnAttribute name="so_version" displayName="SO Version" internal="true" inReportMaker="false"/>
            <columnAttribute name="anticodon" displayName="Anticodon" internal="true" inReportMaker="false"/>
            <columnAttribute name="external_db_version" displayName="External DB Version" internal="true" inReportMaker="false"/>

	    <!-- internal PROTEIN attributes -->
            <columnAttribute name="protein_source_id" internal="true" inReportMaker="false" />
            <columnAttribute name="aa_sequence_id" internal="true" inReportMaker="false" />




	    <columnAttribute name="gene_previous_ids" displayName="Previous ID(s)"  attributeCategory="ids"
                             internal="false" inReportMaker="true" excludeProjects="EuPathDB"/>
         </attributeQueryRef>
<!-- PrimarySequence: sequence source ID, start_min, and end_max for primary
     (as opposed to top-level) location of a gene. John B. says this was
     formerly used for SNPs, and now not at all, so I'm commenting it out. If
     we actually still need it, we should include it in the GeneAttributes table
     and the Bfmv query, so it doesn't require a separate query.

            <attributeQueryRef ref="TranscriptAttributes.PrimarySequence" excludeProjects="EuPathDB">
                <columnAttribute name="primary_seq_id" displayName="Genomic Sequence ID (Primary Annotation)" internal="true" />
                <columnAttribute name="primary_seq_start" displayName="Genomic Location Start (Primary Annotation)" internal="true" />
                <columnAttribute name="primary_seq_end" displayName="Genomic Location End (Primary Annotation)" internal="true" />
            </attributeQueryRef>
-->

<!-- moved to GeneAttributes tuning table / Bfmv query
            <attributeQueryRef ref="TranscriptAttributes.GeneGroupRepresentative" includeProjects="ToxoDB,EuPathDB">
                <columnAttribute name="representative_transcript" displayName="Gene Group (representative gene)"
                                 internal="false" align="center"/>
            </attributeQueryRef>
 -->

          <attributeQueryRef ref="TranscriptAttributes.NaSequenceDatabaseName" excludeProjects="EuPathDB">
            <columnAttribute name="sequence_database_name" internal="true" inReportMaker="false"/>
          </attributeQueryRef>


          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
          <!-- used in results : shows count of transcripts in this result, per gene in this result -->
          <!--+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

          <attributeQueryRef ref="TranscriptAttributes.TranscriptsFoundPerGene" excludeProjects="EuPathDB">
            <columnAttribute name="trans_found_per_gene_internal" />
            <columnAttribute name="transcripts_found_per_gene" displayName="# Transcripts that Met Search Criteria" align="center" help="For each gene, how many of its transcripts met search criteria." />
            <columnAttribute name="transcript_index_per_gene" displayName="Transcript local index" help="For each gene, each of its transcripts in this result gets an index number, starting with 1, 2, ..." />
            <columnAttribute name="has_missing_transcripts" displayName="Gene has Unmatched Transcripts" help="This column has a 'yes' if, in this result, some of the gene's transcripts were not matched by the search. "/>
          </attributeQueryRef>

<!--  cannot specify sorting by a different attribute... so we need to add this attribute as column in same atributeQueryRef
            <textAttribute name="transcripts_found_per_gene" displayName="# Transcripts that Met Search Criteria"  align="center" 
               help="For each gene in your result, how many of its transcripts met search criteria." >
               <text><![CDATA[ $$trans_found_per_gene_internal$$ of $$gene_transcript_count$$ ]]></text>
            </textAttribute>
-->

          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
          <!-- used in gene page : will return comma-delimited list of table names for the particular organism -->  
          <!--+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

<!--
          <attributeQueryRef ref="TranscriptAttributes.TablesForOrganism" excludeProjects="EuPathDB">
            <columnAttribute name="tablesForOrg" internal="true" inReportMaker="false"/>
          </attributeQueryRef>
-->
          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
          <!-- Define Gene Record page sections -->  
          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

<!--
          <attributeQueryRef ref="TranscriptAttributes.HasExpressionSection" excludeProjects="EuPathDB">
            <columnAttribute name="hasExpression" internal="true" inReportMaker="false"/>
          </attributeQueryRef>

          <attributeQueryRef ref="TranscriptAttributes.HasProteomics" excludeProjects="EuPathDB">
            <columnAttribute name="hasProteomics" internal="true" inReportMaker="false"/>
          </attributeQueryRef>

          <attributeQueryRef ref="TranscriptAttributes.HasQuantitativeProteomics" excludeProjects="EuPathDB">
            <columnAttribute name="hasQuantitativeProteomics" internal="true" inReportMaker="false"/>
          </attributeQueryRef>

          <attributeQueryRef ref="TranscriptAttributes.HasPostTransMod" excludeProjects="EuPathDB">
            <columnAttribute name="hasPostTransMod" internal="true" inReportMaker="false"/>
          </attributeQueryRef>

          <attributeQueryRef ref="TranscriptAttributes.HasHtsSnpsSection" excludeProjects="EuPathDB">
            <columnAttribute name="hasHtsSnps" internal="true" inReportMaker="false"/>
          </attributeQueryRef>

          <attributeQueryRef ref="TranscriptAttributes.HasPhenotypeSection" excludeProjects="EuPathDB">
            <columnAttribute name="hasPhenotype" internal="true" inReportMaker="false"/>
          </attributeQueryRef>

          <attributeQueryRef ref="TranscriptAttributes.HasHostResponse" excludeProjects="EuPathDB">
            <columnAttribute name="hasHostResponse" internal="true" inReportMaker="false"/>
          </attributeQueryRef>

          <attributeQueryRef ref="TranscriptAttributes.HasPdbSimilarity" excludeProjects="EuPathDB">
            <columnAttribute name="hasPdbSimilarity" internal="true" inReportMaker="false"/>
          </attributeQueryRef>

          <attributeQueryRef ref="TranscriptAttributes.HasSsgcid" excludeProjects="EuPathDB,HostDB">
            <columnAttribute name="hasSsgcid" internal="true" inReportMaker="false"/>
          </attributeQueryRef>

	  <attributeQueryRef ref="TranscriptAttributes.IsUnassignedTCruzi" excludeProjects="EuPathDB">
            <columnAttribute name="is_unassigned_tcruzi"  displayName="Is Unassigned T cruzi" internal="true"  inReportMaker="false" />
	  </attributeQueryRef>


          <textAttribute name="ssgcid_request_link" displayName="ssgcid_request_link" internal="true" 
                         inReportMaker="false" truncateTo="1000">
                <text>
                    <![CDATA[
                    <b>Nominate this gene for structure determination <a href='http://apps.sbri.org/SSGCIDCommTargReq/Default.aspx'>here</a></b>
                    ]]>
                </text>
	  </textAttribute>

	  <attributeQueryRef ref="TranscriptAttributes.IsAnnotated" excludeProjects="EuPathDB">
            <columnAttribute name="is_annotated"  displayName="Is Annotated" internal="true"  inReportMaker="false" />
	  </attributeQueryRef>

	  <attributeQueryRef ref="TranscriptAttributes.ReleasePolicy" excludeProjects="EuPathDB">
            <columnAttribute name="release_policy"  displayName="Release Policy" internal="true"   inReportMaker="false"/>
	  </attributeQueryRef>
-->

          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
          <!-- transcript sequence attributes -->  
          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->


          <attributeQueryRef ref="TranscriptAttributes.TranscriptSequence">
            <columnAttribute displayName="Predicted RNA/mRNA Sequence (introns spliced out)"
                             name="transcript_sequence" internal="true" inReportMaker="true"/>
            <columnAttribute displayName="Wrapped Transcript Sequence"
                             name="transseq_wrapped" internal="true" inReportMaker="false"/>
             <textAttribute name="fasta_transcript_sequence" displayName="Predicted RNA/mRNA Sequence"
                               internal="false" attributeCategory="transSeq">
                   <text>
                      <![CDATA[
                               <pre>&gt;$$source_id$$<br>$$transseq_wrapped$$</pre>
                            ]]>
                   </text>
                </textAttribute>
          </attributeQueryRef>

          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
          <!-- protein sequence -->  
          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->


          <attributeQueryRef ref="TranscriptAttributes.ProteinSequence">
            <columnAttribute displayName="Predicted Protein Sequence"
                             name="protein_sequence" internal="true" inReportMaker="true"/>
            <columnAttribute displayName="Wrapped Protein Sequence"
                             name="protseq_wrapped" internal="true" inReportMaker="false"/>
            <columnAttribute displayName="pseudo_warning"
                             name="pseudo_warning" internal="true" inReportMaker="false"/>
             <textAttribute name="fasta_protein_sequence" displayName="Predicted Protein Sequence"
                               internal="false" attributeCategory="protSeq">
                   <text>
                      <![CDATA[
                               <pre>&gt;$$source_id$$$$pseudo_warning$$<br>$$protseq_wrapped$$</pre>
                            ]]>
                   </text>
                </textAttribute>
          </attributeQueryRef>


          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
          <!-- CDS sequence attributes -->  
          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

         <attributeQueryRef ref="TranscriptAttributes.CDS">
            <columnAttribute displayName="Coding Sequence" internal="true"
                    name="cds"/>
            <columnAttribute displayName="Wrapped CDS Sequence"
                             name="cds_wrapped" internal="true" inReportMaker="false"/>
             <textAttribute name="fasta_cds_sequence" displayName="Coding Sequence"
                               internal="false" attributeCategory="transSeq">
                   <text>
                      <![CDATA[
                               <pre>&gt;$$source_id$$<br>$$cds_wrapped$$</pre>
                            ]]>
                   </text>
                </textAttribute>
          </attributeQueryRef>


          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
          <!-- Updated product name from genedb -->  
          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->


         <attributeQueryRef ref="TranscriptAttributes.GeneDBNewIdTemp" includeProjects="TriTrypDB,PlasmoDB">
                <columnAttribute name="genedb_new_id" internal="true" inReportMaker="false" />
                <textAttribute name="GeneDBNewLinkTemp"
                               internal="true" inReportMaker="false">

                   <text>
                      <![CDATA[
                        <a href="http://www.genedb.org/gene/$$genedb_new_id$$">$$genedb_new_id$$</a>
                            ]]>
                   </text>
                </textAttribute>
          </attributeQueryRef>


          <attributeQueryRef ref="TranscriptAttributes.GeneDBUpdatedProductName" includeProjects="TriTrypDB,PlasmoDB">
            <columnAttribute name="new_product_name" displayName="GeneDB Updated Product Name" attributeCategory="proattribs" internal="false" inReportMaker="false"/>
          </attributeQueryRef>

        
         <textAttribute name="GeneDB_New_Product" includeProjects="TriTrypDB,PlasmoDB"
                        internal="true" inReportMaker="false">
            <text>
               <![CDATA[
                     Current product name(s) from GeneDB: $$new_product_name$$
                     ]]>
            </text>
         </textAttribute>


          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
          <!-- Updated annotation in genedb for tritryp -->  
          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

<!-- not working in gus 4 for now
          <attributeQueryRef ref="TranscriptAttributes.updated_annotation" includeProjects="TriTrypDB,PlasmoDB">
            <columnAttribute displayName="Updated Sequence" internal="true" name="updated_annotation"/>
            <columnAttribute displayName="Revied Comment in GeneDB" internal="true" name="reviewed_comment_in_genedb"/>
            <columnAttribute displayName="Revied Comment in EuPathDB" internal="true" name="reviewed_comment_in_eupathdb"/>
          </attributeQueryRef>
        
         <textAttribute name="GeneDB_updated"
                        internal="true" inReportMaker="false"
                        includeProjects="TriTrypDB,PlasmoDB">
            <text>
               <![CDATA[
                     <a href="http://www.genedb.org/Query/quickSearch?pseudogenes=true&product=true&allNames=true&searchText=$$updated_annotation$$" target="genedb">View updated annotation at GeneDB</a>
                     ]]>
            </text>
         </textAttribute> 
-->
          <!--++++++++++++++++++++++++++++++++++-->
          <!-- old IDs - from previous releases -->  
          <!--++++++++++++++++++++++++++++++++++-->

	  <!--  TO FIX for GUS4
	  <textAttribute name="OldIds" internal="true" inReportMaker="false">
	    <text>
	      <![CDATA[
		       Previous ID(s): $$old_ids$$
	      ]]>
	    </text>
	 </textAttribute>
	  -->

          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
          <!-- PlasmoDB New Annotation -->  
          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
<!-- the workshop (re) annotations have become the official annotations and this section is obsolete

        <attributeQueryRef ref="TranscriptAttributes.TrackNewAnnotation" includeProjects="PlasmoDB">
            <columnAttribute displayName="Annotation Status" name="annotation_status" internal="true" inReportMaker="false"/>
            <columnAttribute displayName="Has New GO" name="new_go" internal="true" inReportMaker="false"/>
            <columnAttribute displayName="Has New EC" name="new_ec" internal="true" inReportMaker="false"/>
            <columnAttribute displayName="Has New Product" name="new_product" internal="true" inReportMaker="false"/>
            <columnAttribute displayName="Has New Protein" name="new_protein" internal="true" inReportMaker="false"/>
            <columnAttribute displayName="Reannotation Product Description" name="new_product_string" internal="true" inReportMaker="true"/>
        </attributeQueryRef>

        <attributeQueryRef ref="TranscriptAttributes.NewAnnotationProteinSequence" includeProjects="PlasmoDB">
            <columnAttribute displayName="Reannotation Predicted Protein Sequence"
                             name="workshop_protein_sequence" internal="true" inReportMaker="true"/>
        </attributeQueryRef>

        <attributeQueryRef ref="TranscriptAttributes.NewAnnotationTranscriptSequence" includeProjects="PlasmoDB">
            <columnAttribute displayName="Reannotation Predicted RNA/mRNA Sequence (introns spliced out)"
                             name="workshop_transcript_sequence" internal="true" inReportMaker="true"/>
        </attributeQueryRef>

        <attributeQueryRef ref="TranscriptAttributes.NewAnnotationCDS" includeProjects="PlasmoDB">
            <columnAttribute displayName="Reannotation Coding Sequence" internal="true"
                    name="workshop_cds" inReportMaker="true"/>
        </attributeQueryRef>
-->
          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
          <!-- data dump attributes -->  
          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

          <attributeQueryRef ref="TranscriptAttributes.GeneGffAttrs">
              <columnAttribute displayName="SeqId" name="gff_seqid" internal="true" inReportMaker="false"/>
              <columnAttribute displayName="Data Source" name="gff_source" internal="true" inReportMaker="false"/>
              <columnAttribute displayName="Feature Type" name="gff_type" internal="true" inReportMaker="false"/>
              <columnAttribute displayName="Start" name="gff_fstart" internal="true" inReportMaker="false"/>
              <columnAttribute displayName="Start" name="gff_fend" internal="true" inReportMaker="false"/>
              <columnAttribute displayName="Score" name="gff_score" internal="true" inReportMaker="false"/>
              <columnAttribute displayName="Strand" name="gff_strand" internal="true" inReportMaker="false"/>
              <columnAttribute displayName="Reading Frame" name="gff_phase" internal="true" inReportMaker="false"/>
              <columnAttribute displayName="ID" name="gff_attr_id" internal="true" inReportMaker="false"/>
              <columnAttribute displayName="Web ID" name="gff_attr_web_id" internal="true" inReportMaker="false"/>
              <columnAttribute displayName="Name" name="gff_attr_name" internal="true" inReportMaker="false"/>
              <columnAttribute displayName="description" name="gff_attr_description" internal="true" inReportMaker="false"/>
              <columnAttribute displayName="Size" name="gff_attr_size" internal="true" inReportMaker="false"/>
              <columnAttribute displayName="Locus Tag" name="gff_attr_locus_tag" internal="true" inReportMaker="false"/>
          </attributeQueryRef>

          <attributeQueryRef ref="TranscriptAttributes.GeneGffSequence" excludeProjects="EuPathDB">
              <columnAttribute displayName="Transcript Sequence" name="gff_transcript_sequence" internal="true" inReportMaker="false"/>
          </attributeQueryRef>

          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
          <!-- NCBI Genetic Code attribute -->  
          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

<!-- 
          <attributeQueryRef ref="TranscriptAttributes.GeneticCode" excludeProjects="EuPathDB">
              <columnAttribute displayName="Genetic Code" name="genetic_code" internal="true" inReportMaker="false"/>
              <columnAttribute displayName="Mitochondrial Genetic Code" name="mitochondrial_genetic_code" internal="true" inReportMaker="false"/>
              <columnAttribute displayName="Sequence SO Term" name="sequence_so_term" internal="true" inReportMaker="false"/>
          </attributeQueryRef>
-->


       <!-- =================================================================== -->

          <attributeQueryRef ref="TranscriptAttributes.Protein_Linkout" includeProjects="CryptoDB">
                <columnAttribute name="protein_id" displayName="Protein ID"
                                 internal="true" />
                <columnAttribute name="linkout"
                                 inReportMaker="false"
                                 internal="true" />
          </attributeQueryRef>

<!--
          <attributeQueryRef ref="TranscriptAttributes.SGC_3D_Struct" includeProjects="CryptoDB">
                <columnAttribute name="pdb_id" displayName="Structural Genomics Consortium 3D Structure"
                                 inReportMaker="false"
                                 internal="true"  />
          </attributeQueryRef>
-->
          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
          <!-- Text  attributes -->  
          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

          <attributeQueryRef ref="TranscriptAttributes.ChromosomeMappingText" includeProjects="CryptoDB">
                <columnAttribute name="chromosomemappingtext" displayName="Chromosome" internal="true" />
          </attributeQueryRef>

          <textAttribute name="overview" displayName="Overview" excludeProjects="EuPathDB"
                         internal="true" inReportMaker="false">

             <text>
                  <![CDATA[
                  <i>$$organism_full$$</i> $$gene_type$$ $$pseudo_string$$ on <a href="@WEBAPP_BASE_URL@/record/genomic-sequence/$$sequence_id$$">$$sequence_id$$</a> from $$gene_start_min_text$$ to $$gene_end_max_text$$ (Chromosome: $$chromosome$$)
                  ]]>
             </text>
          </textAttribute>
          <textAttribute name="snpoverview" displayName="SNP Overview" excludeProjects="EuPathDB"
                         internal="true" inReportMaker="false">
             <text>
                  <![CDATA[
                  <b>Total SNPs All Strains:</b> $$gene_total_hts_snps$$<br/>
                  <b>NonSynonymous SNPs All Strains:</b> $$gene_hts_nonsynonymous_snps$$<br/>
                  <b>Noncoding SNPs All Strains:</b> $$gene_hts_noncoding_snps$$<br/>
                  <b>Stop Codon SNPs All Strains:</b> $$gene_hts_stop_codon_snps$$<br/>
                  <b>Synonymous SNPs All Strains:</b> $$gene_hts_synonymous_snps$$<br/>
                  <b>Nonsyn/Syn SNP Ratio All Strains:</b> $$gene_hts_nonsyn_syn_ratio$$<br/>
                  ]]>
             </text>
         </textAttribute>


         <!-- TODO: Do we still need these here?? -->

         <!--
         <attributeQueryRef ref="TranscriptAttributes.DnaGTracks" excludeProjects="EuPathDB">
                <columnAttribute name="dna_gtracks" internal="true" inReportMaker="false" />
           </attributeQueryRef>

         <attributeQueryRef ref="TranscriptAttributes.ProteinGTracks" excludeProjects="EuPathDB">
                <columnAttribute name="protein_gtracks" internal="true" inReportMaker="false" />
           </attributeQueryRef>
-->

         <textAttribute name="gbrowseLink" internal="true" inReportMaker="false" includeProjects="PlasmoDB,ToxoDB">
            <text includeProjects="PlasmoDB">
                 <![CDATA[
                /cgi-bin/gbrowse/plasmodb/?name=$$sequence_id$$%3A$$gene_context_start$$-$$gene_context_end$$;enable=Gene;h_feat=$$primary_key$$@thistle
                ]]>
            </text>
            <text includeProjects="ToxoDB">
                 <![CDATA[
                /cgi-bin/gbrowse/toxodb/?name=$$sequence_id$$%3A$$gene_context_start$$-$$gene_context_end$$;enable=Gene;h_feat=$$primary_key$$@thistle
                ]]>
            </text>
         </textAttribute>

         <textAttribute name="GBrowse" inReportMaker="false" excludeProjects="EuPathDB" help="View this Gene in the Genome Browser" sortable="false">
           <text>
                 <![CDATA[
                <a href="/cgi-bin/gbrowse/$$lc_project_id$$/?name=$$primary_key$$;enable=Gene">GBrowse</a>
                ]]>
            </text>
         </textAttribute>


         <textAttribute name="dnaAlternateContext" displayName="Genomic Context"  includeProjects="ToxoDB"
               internal="true" inReportMaker="false">
            <text>
            <!--Alternate Gene Models are taking time are hence being currently avoided in the record page
                <![CDATA[
                /cgi-bin/gbrowse_img/toxodb/?name=$$sequence_id$$%3A$$context_start$$-$$context_end$$;embed=1;type=Gene+GLEANGeneModels+TwinScan/EimeriaPredictions+TwinScanPredictions+GlimmerHMMPredictions+TigrScanPredictions;options=Gene+GLEANGeneModels+TwinScan/EimeriaPredictions+TwinScanPredictions+GlimmerHMMPredictions+TigrScanPredictions+2;h_feat=$$primary_key$$@thistle;width=600;hmap=dnaContextMap;base=/cgi-bin/gbrowse
                ]]> -->
                <![CDATA[
                /cgi-bin/gbrowse_img/toxodb/?name=$$sequence_id$$%3A$$gene_context_start$$-$$gene_context_end$$;embed=1;type=Gene;options=Gene+2;h_feat=$$primary_key$$@thistle;width=600;hmap=dnaContextMap;base=/cgi-bin/gbrowse
                ]]>
            </text>
         </textAttribute>
         
          <attributeQueryRef ref="TranscriptAttributes.Translation" includeProjects="CryptoDB">
                <columnAttribute name="translation" displayName="Predicted Protein Sequence" />
           </attributeQueryRef>

        <attributeQueryRef ref="TranscriptAttributes.CellularLocalization" includeProjects="GiardiaDB">
          <columnAttribute name="dic_img_uri" displayName="DIC Image" internal="true" inReportMaker="false"/>
          <columnAttribute name="gfp_img_uri" displayName="GFP Image" internal="true" inReportMaker="false"/>
          <columnAttribute name="is_visible" displayName="Visible" internal="true" inReportMaker="false"/>
          <columnAttribute name="has_image" displayName="Has Image" internal="true" inReportMaker="false"/>

          <textAttribute name="dbp_image" displayName="DIC/GFP Image" help="DIC/GFP Image" attributeCategory="localization" align="center"
               inReportMaker="false" truncateTo="10000">
            <text>
              <![CDATA[
              <span style="white-space: nowrap">
              <a href="/cgi-bin/geneimage?source_id=$$source_id$$&project_id=GiardiaDB">
               <img src="/common/GintestinalisAssemblageA/image/gassAWB_DBP_GeneImage_RSRC/$$dic_img_uri$$.jpg" style="display:$$is_visible$$" width="80" height="80"/>
              </a>

              <a href="/cgi-bin/geneimage?source_id=$$source_id$$&project_id=GiardiaDB">
               <img src="/common/GintestinalisAssemblageA/image/gassAWB_DBP_GeneImage_RSRC/$$gfp_img_uri$$.jpg" style="display:$$is_visible$$" width="80" height="80"/>
               </a>
               </span>
              ]]> 
             </text>
           </textAttribute> 
          <columnAttribute name="note" displayName="Image Description" attributeCategory="localization" truncateTo="1000" internal="false" inReportMaker="true"/>
         </attributeQueryRef>

<!--
          <attributeQueryRef ref="TranscriptAttributes.Plasmogem" includeProjects="PlasmoDB">
            <columnAttribute name="has_plasmogem_info" internal="true" inReportMaker="false"/>
            <columnAttribute name="plasmogem_gene_id" internal="true" inReportMaker="false"/>
            <columnAttribute name="pg_resource_list" internal="true" inReportMaker="false"/>
            <columnAttribute name="pg_design_list" internal="true" inReportMaker="false"/>
            <textAttribute name="plasmogem_link" displayName="PlasmoGEM"


                           inReportMaker="false" truncateTo="10000">
              <text>
              <![CDATA[<a href="http://plasmogem.sanger.ac.uk/genes/list?name_prod=$$plasmogem_gene_id$$&resop=or">PlasmoGEM available resources (finished plasmids): $$pg_resource_list$$. Available designs: $$pg_design_list$$.</a>
                 ]]>
              </text>
            </textAttribute>
          </attributeQueryRef>
-->

        </recordClass>

    </recordClassSet>
</wdkModel>
