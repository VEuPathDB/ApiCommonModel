<wdkModel>

   <!-- notes
      - we should redefine the bfmv to include only columns that all projects have, moving
        the other stuff into auxiliary tables.  this way the sql for the bfmv can be shared.

      - what does api's <projectParamRef> do?
   -->
   
    <recordClassSet name="TranscriptRecordClasses">


  <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
  <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
  <!-- Gene Record -->  
  <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
  <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

<!-- record displayName used in results page where gene and transcripts counts are shown -->
        <recordClass name="TranscriptRecordClass" 
                     urlName="transcript"
                     displayName="Transcript"
                     allRecordsQueryRef="TranscriptAttributes.AllTranscripts"
                     customBooleanQueryClassName="org.apidb.apicommon.model.TranscriptBooleanQuery"
                     customSnapshotBasketQueryPluginClassName="org.apidb.apicommon.model.TranscriptSnapshotBasketQueryPlugin">

          <defaultColumnToolBundle ref="geneDefault" />

	  <resultSizeQueryRef recordDisplayName="Gene" ref="GeneSummaries.countOfGenes"/>
	  <resultPropertyQueryRef  propertyName="genesMissingTranscriptsCount" ref="GeneSummaries.countOfGenesWithMissingTranscripts"/>

    <attributeCategories>
      <attributeCategory name="gene_parent" displayName="Gene Specific">
        <attributeCategory name="summary" displayName="Summary"/>
        <attributeCategory name="curation" displayName="Publications, Curation"/>
        <attributeCategory name="ids" displayName="Text, IDs, Species"/>
        <attributeCategory name="position" displayName="Genomic Context"/>
        <attributeCategory name="geneattribs" displayName="Gene Attributes"/>
        <attributeCategory name="evolution" displayName="Evolution"/>
        <attributeCategory name="popbio" displayName="Population Biology"/>
        <attributeCategory name="hostresp" displayName="Host Response">
        </attributeCategory>
        <attributeCategory name="trasexpr" displayName="Gene Expression">

          <attributeCategory name="trasexprMicroarray" displayName="Microarray">
          </attributeCategory>
          <attributeCategory name="trasexprRNASeq" displayName="RNASeq">
          </attributeCategory>
        </attributeCategory>
      </attributeCategory>

      <attributeCategory name="trans_parent" displayName="Transcript Specific">
        <attributeCategory name="tranattribs" displayName="Transcript Attributes"/>
        <attributeCategory name="proattribs" displayName="Protein Attributes"/>
        <attributeCategory name="profeatures" displayName="Protein Features"/>
        <attributeCategory name="similarity" displayName="Similarity/Pattern"/>
        <attributeCategory name="localization" displayName="Cellular Localization"/>

        <attributeCategory name="proexpr" displayName="Protein Expression">
        </attributeCategory>
        <attributeCategory name="cellloc" displayName="Cellular Location"/>
        <attributeCategory name="putfunc" displayName="Putatitve Function">
          <attributeCategory name="goterms" displayName="GO Terms">

            <attributeCategory name="annotgoterms" displayName="Annotated GO Term"/>
            <attributeCategory name="predgoterms" displayName="Predicted GO Term"/>
          </attributeCategory>
          <attributeCategory name="goids" displayName="GO IDs">
            <attributeCategory name="annotgoids" displayName="Annotated GO ID"/>
            <attributeCategory name="predgoids" displayName="Predicted GO ID"/>
          </attributeCategory>
          <attributeCategory name="ecnum" displayName="EC Numbers">
            <attributeCategory name="annotecs" displayName="Annotated EC Numbers"/>
            <attributeCategory name="derivedecs" displayName="EC Numbers from OrthoMCL"/>
          </attributeCategory>
        </attributeCategory>
        <attributeCategory name="transProtSeq" displayName="Transcript and Protein Sequences">
          <attributeCategory name="transSeq" displayName="Transcript"/>
          <attributeCategory name="protSeq" displayName="Protein"/>
        </attributeCategory>
      </attributeCategory>
    </attributeCategories>



            <testParamValues includeProjects="PlasmoDB">
               <paramValue name="source_id">%%defaultGene%%</paramValue>
               <paramValue name="project_id">PlasmoDB</paramValue>
            </testParamValues>

            <testParamValues includeProjects="ToxoDB">
               <paramValue name="source_id">TGME49_221330</paramValue>
               <paramValue name="project_id">ToxoDB</paramValue>
            </testParamValues>

            <testParamValues includeProjects="CryptoDB">
               <paramValue name="source_id">cgd3_1400</paramValue>
               <paramValue name="project_id">CryptoDB</paramValue>
            </testParamValues>

            <testParamValues includeProjects="GiardiaDB">
               <paramValue name="source_id">GL50803_112048</paramValue>
               <paramValue name="project_id">GiardiaDB</paramValue>
            </testParamValues>

            <testParamValues includeProjects="TrichDB">
               <paramValue name="source_id">%%defaultGene%%</paramValue>
               <paramValue name="project_id">TrichDB</paramValue>
            </testParamValues>

            <!--TODO revisit source_id. its correct but random-->
            <testParamValues includeProjects="TriTrypDB">
               <paramValue name="source_id">Tc00.1047053505807.140</paramValue>
               <paramValue name="project_id">TriTrypDB</paramValue>
            </testParamValues>

            <testParamValues includeProjects="AmoebaDB">
               <paramValue name="source_id">%%defaultGene%%</paramValue>
               <paramValue name="project_id">AmoebaDB</paramValue>
            </testParamValues>

            <testParamValues includeProjects="MicrosporidiaDB">
               <paramValue name="source_id">ECU07_1760</paramValue>
               <paramValue name="project_id">MicrosporidiaDB</paramValue>
            </testParamValues>

            <testParamValues includeProjects="PiroplasmaDB">
               <paramValue name="source_id">BBOV_IV003850</paramValue>
               <paramValue name="project_id">PiroplasmaDB</paramValue>
            </testParamValues>

            <testParamValues includeProjects="HostDB">
               <paramValue name="source_id">%%defaultGene%%</paramValue>
               <paramValue name="project_id">HostDB</paramValue>
            </testParamValues>

            <testParamValues includeProjects="FungiDB,SchistoDB,VectorBase,InitDB">
               <paramValue name="source_id"></paramValue>
               <paramValue name="project_id"></paramValue>
            </testParamValues>

            <testParamValues includeProjects="UniDB">
               <paramValue name="source_id"></paramValue>
            </testParamValues>

            
          <!-- =============================================================== -->
          <!--  primary key definition -->  
          <!-- =============================================================== -->
            <primaryKey aliasQueryRef="TranscriptAttributes.GeneAlias">
                <!-- order here matters: gene_source_id must come first for proper sorting -->
                <columnRef>gene_source_id</columnRef>
                <columnRef>source_id</columnRef>
                <columnRef excludeProjects="UniDB">project_id</columnRef>
            </primaryKey>

            <idAttribute name="primary_key"
                                 displayName="Gene ID" 
                                 attributeCategory="deep">
                <text>
                    <![CDATA[
                    $$gene_source_id$$
                    ]]>
                </text>
            </idAttribute>

          <!-- =============================================================== -->
          <!--  define the attribute field that will be used as -->  
          <!-- =============================================================== -->
          <favorite noteField="gene_product" />

      <!-- =============================================================== -->
      <!--  Default summary attributes and sorting attributes -->  
      <!-- =============================================================== -->
<!--              summary="representative_transcript,gene_location_text,gene_product,old_ids" -->            
          <attributesList includeProjects="EuPathDB"
              summary="organism,gene_location_text,gene_product"
              sorting="organism asc,gene_location_text asc"
         />

         <attributesList 
              summary="gene_location_text,gene_product"
              sorting="gene_location_text asc"
         />



      <!-- =============================================================== -->
      <!--  Step Filters -->
      <!-- =============================================================== -->
 
            <filterRef name="transcriptFilters.representativeTranscriptOnly"/>
            <filterRef name="transcriptFilters.matchedTranscriptFilter"/>
            <filterRef name="transcriptFilters.organismFilter"/>
            <filterRef name="transcriptFilters.genesByPathway"/>

       <!-- =============================================================== -->
       <!--  Summary & record views -->
       <!-- =============================================================== -->

             <summaryView name="_default" display="Gene Results">
                 <description>
                     <![CDATA[
                         View transcripts.
                     ]]>
                 </description>
             </summaryView>

             <summaryView name="genomic-view" display="Genome View">
                 <description>
                     <![CDATA[
                         View your hits mapped to their corresponding largest assembled genomic DNA segment, often a chromosome, but
 sometimes a contig or scaffold.
                     ]]>
                 </description>
             </summaryView> 

      <!-- =============================================================== -->
      <!--  Step Analysis Plugins -->
      <!-- =============================================================== -->


<!--             <stepAnalysisRef name="hpiGeneList" includeProjects="HostDB"/> -->

 <!--            <stepAnalysisRef name="datasetGeneList" excludeProjects="HostDB"/>  -->

             <stepAnalysisRef name="go-enrichment" />
             <stepAnalysisRef name="pathway-enrichment" excludeProjects="EuPathDB,UniDB"/>
             <stepAnalysisRef name="word-enrichment"/>

             <!-- Sample/test plugins 
             <stepAnalysisRef name="long-running-test"/>
             <stepAnalysisRef name="result-counter"/>
             <stepAnalysisRef name="form-test"/>
             <stepAnalysisRef name="process-test"/>
             <stepAnalysisRef name="checkbox-tree-test"/>
             -->

      <!-- =============================================================== -->
      <!--   Reporters -->  
      <!-- =============================================================== -->


          <reporter name="attributesTabular" displayName="%%attributesReporterDisplayName%%" scopes="results"
                    implementation="org.apidb.apicommon.model.report.TranscriptAttributesReporter">
              <property name="page_size">500</property>
          </reporter>

          <reporter name="tableTabular" displayName="%%tableReporterDisplayName%%" scopes="results"  
                    implementation="org.apidb.apicommon.model.report.TranscriptTableReporter">
              <!-- huge page size to force no paging  -->
              <property name="page_size">1000000</property>
          </reporter>

          <reporter name="bed" displayName="BED - coordinates of sequences, configurable" scopes="results" newBuild="66"
                    implementation="org.apidb.apicommon.model.report.bed.BedGeneReporter" />

          <reporter name="sequence" displayName="FASTA - sequence retrieval, configurable" scopes="results" newBuild="66" implementation="org.apidb.apicommon.model.report.sequence.SequenceReporter" />

              <!-- it used to say 'gene models and optional sequences', we need to add the ui control to enable  -->
          <reporter name="gff3" displayName="GFF3 - gene models"    scopes="results, record"
                    implementation="org.apidb.apicommon.model.report.Gff3CachedReporter">
              <property name="table_cache">apidb.GeneGff</property>
              <property name="project_id_column">project_id</property>
              <property name="record_id_column">source_id</property>
              <property name="gff_record">gff_record</property>
              <property name="gff_protein">gff_protein</property>
              <property name="gff_transcript">gff_transcript</property>
          </reporter>

          <!-- the report maker used on commandline to generate gff download files -->
          <reporter name="gff3Dump" displayName="Summary - GFF3" scopes=""
                    inReportMaker="false"
                    implementation="org.apidb.apicommon.model.report.Gff3Reporter">
              <property name="table_cache">apidb.GeneGff</property>
              <property name="project_id_column">project_id</property>
              <property name="record_id_column">source_id</property>
              <property name="gff_record">gff_record</property>
              <property name="gff_protein">gff_protein</property>
              <property name="gff_transcript">gff_transcript</property>
          </reporter>

          <reporter name="fullRecord" displayName="Text: choose from columns and/or tables" scopes=""
                    implementation="org.gusdb.wdk.model.report.reporter.FullRecordReporter" />

          <reporter name="xml" displayName="XML: choose from columns and/or tables" scopes=""
                    implementation="org.gusdb.wdk.model.report.reporter.XMLReporter" />

          <reporter name="json" displayName="JSON: choose from columns and/or tables" scopes=""
                    implementation="org.gusdb.wdk.model.report.reporter.JSONReporter" />

          <reporter name="blastSummaryView" displayName="Summary View for BLAST results" scopes=""
                    implementation="org.eupathdb.common.model.report.summaryview.BlastViewReporter" />

          <reporter name="geneGenomeSummaryView" displayName="Gene Genome Summary View" scopes=""
                    implementation="org.apidb.apicommon.model.report.summaryview.genome.GeneGenomeViewReporter" />

          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
          <!-- BFMV attributes -->  
          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
            
          <attributeQueryRef ref="TranscriptAttributes.Bfmv">

            <columnAttribute name="lc_project_id" inReportMaker="false" attributeCategory="ids"/>
            <columnAttribute name="project_id" inReportMaker="false" attributeCategory="ids" includeProjects="UniDB"/>

            <!-- Replaced with textAttribute below since this link doesn't really make sense. See #23617 -->
            <!--
            <linkAttribute name="transcript_link" displayName="Transcript ID" inReportMaker="false" attributeCategory="tranattribs">
              <displayText>
                <![CDATA[ $$source_id$$ ]]>
              </displayText>
              <url>
                <![CDATA[ @WEBAPP_BASE_URL@/record/gene/$$gene_source_id$$ ]]>
              </url>
            </linkAttribute>
            -->

            <textAttribute name="transcript_link" displayName="Transcript ID" removable="false">
              <text><![CDATA[ $$source_id$$ ]]></text>
            </textAttribute>

	    <!-- GENE attributes -->
            <columnAttribute displayName="Genomic Sequence ID" name="sequence_id" attributeCategory="ids"/>

            <columnAttribute displayName="Chromosome" name="chromosome" attributeCategory="position">
              <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
                <description>
                  <![CDATA[ Display the terms in the attribute as word clouds ]]>
                </description>
                <property name="min-word-length">1</property>
                <property name="exclude-numbers">false</property>
                <property name="split-pattern"><![CDATA[,]]></property>
              </reporter>
            </columnAttribute>

            <columnAttribute name="gene_product" displayName="Product Description" help="Protein Product for this gene" attributeCategory="summary">
              <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                      implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
                <description>
                  <![CDATA[ Display the terms in the attribute as word clouds ]]>
                </description>
              </reporter>
            </columnAttribute>

            <textAttribute name="organism" displayName="Organism" inReportMaker="true" 
               help="The biological sample used to sequence this genome" attributeCategory="summary">
               <display><![CDATA[ <i>$$organism_full$$</i>  ]]></display>
               <text><![CDATA[ $$organism_full$$  ]]></text>
            </textAttribute>

            <columnAttribute name="gene_type" displayName="Gene Type" help="Gene Product Categories" attributeCategory="summary"/>

            <textAttribute name="gene_location_text" displayName="Genomic Location (Gene)" help="Contig/Chromosome:start-end(strand)" attributeCategory="summary">
             <display>
                  <![CDATA[
                  $$sequence_id$$:$$gene_start_min_text$$..$$gene_end_max_text$$($$strand_plus_minus$$)
                  ]]>
              </display>
              <text>
                  <![CDATA[
                  $$sequence_id$$:$$gene_start_min_text$$..$$gene_end_max_text$$($$strand_plus_minus$$)
                  ]]>
              </text>
            </textAttribute>

            <columnAttribute name="gene_name" displayName="Gene Name or Symbol" attributeCategory="ids"
                             inReportMaker="true" align="center"/>
            <columnAttribute name="gene_exon_count" displayName="# Exons in Gene" help="Total number of Exons"
                             inReportMaker="true" align="center" attributeCategory="summary">
              <reporter name="histogram" displayName="Histogram" scopes=""
                      implementation="org.gusdb.wdk.model.report.reporter.HistogramAttributeReporter">
                <description>
                  <![CDATA[ Display the histogram of the values of this attribute ]]>
                </description>
              </reporter>
            </columnAttribute>

            <columnAttribute name="is_pseudo" displayName="Is Pseudo" inReportMaker="true" attributeCategory="summary"/>

            <columnAttribute name="gene_transcript_count" displayName="# Transcripts" align="center" help="Total number of transcripts annotated in this gene." attributeCategory="geneattribs">
             <reporter name="histogram" displayName="Histogram" scopes=""
               implementation="org.gusdb.wdk.model.report.reporter.HistogramAttributeReporter"
              >
                <description>Display the histogram of the values of this attribute</description>
              </reporter>
            </columnAttribute>

            <columnAttribute name="is_deprecated" displayName="Deprecated?" align="center" includeProjects="GiardiaDB"/>
            <columnAttribute name="is_deprecated" inReportMaker="false" displayName="Deprecated?" align="center" excludeProjects="GiardiaDB"/>

            <columnAttribute name="gene_ortholog_number" displayName="Ortholog count" align="center" help="Number of Orthologs within this database" attributeCategory="evolution">
                <reporter name="histogram" displayName="Histogram" scopes=""
                        implementation="org.gusdb.wdk.model.report.reporter.HistogramAttributeReporter">
                  <description>
                    <![CDATA[ Display the histogram of the values of this attribute ]]>
                  </description>
                </reporter>
            </columnAttribute>

            <columnAttribute name="gene_paralog_number" displayName="Paralog count" align="center" help="Number of Paralogs within this database" attributeCategory="evolution">
             <reporter name="histogram" displayName="Histogram" scopes=""
               implementation="org.gusdb.wdk.model.report.reporter.HistogramAttributeReporter"
              >
                <description>Display the histogram of the values of this attribute</description>
              </reporter>
            </columnAttribute>

            <columnAttribute name="gene_orthomcl_name" displayName="Ortholog Group" inReportMaker="true" help="orthomcl.org identifier OR other identifier for a group of orthologs" attributeCategory="evolution"/>
            <columnAttribute name="orthomcl_link" displayName="Ortholog Group" inReportMaker="false" help="orthomcl.org identifier OR other identifier for a group of orthologs" attributeCategory="evolution" truncateTo="4000">
              <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                      implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
                <description>
                  <![CDATA[ Display the terms in the attribute as word clouds ]]>
                </description>
              </reporter>
           </columnAttribute>


            <!-- columnAttribute name="gene_total_hts_snps" displayName="Total SNPs All Strains" includeProjects="UniDB,PlasmoDB,ToxoDB,PiroplasmaDB,AmoebaDB,CryptoDB,TriTrypDB,FungiDB" align="center" help="SNPs are from high throughput resequencing only." attributeCategory="popbio"/ -->
            <!-- columnAttribute name="gene_hts_nonsynonymous_snps" displayName="NonSynonymous SNPs All Strains" includeProjects="UniDB,PlasmoDB,ToxoDB,PiroplasmaDB,AmoebaDB,CryptoDB,TriTrypDB,FungiDB" align="center" help="SNPs are from high throughput resequencing only." attributeCategory="popbio"/ -->
            <!-- columnAttribute name="gene_hts_synonymous_snps" displayName="Synonymous SNPs All Strains" includeProjects="UniDB,PlasmoDB,ToxoDB,PiroplasmaDB,AmoebaDB,CryptoDB,TriTrypDB,FungiDB" align="center" help="SNPs are from high throughput resequencing only." attributeCategory="popbio"/ -->


            <!-- columnAttribute name="gene_hts_noncoding_snps" displayName="Non-Coding SNPs All Strains" includeProjects="UniDB,PlasmoDB,ToxoDB,PiroplasmaDB,AmoebaDB,CryptoDB,TriTrypDB,FungiDB" align="center" help="SNPs are from high throughput resequencing only." attributeCategory="popbio"/ -->

            <!--columnAttribute name="gene_hts_stop_codon_snps" displayName="SNPs with Stop Codons All Strains" includeProjects="UniDB,PlasmoDB,ToxoDB,PiroplasmaDB,AmoebaDB,CryptoDB,TriTrypDB,FungiDB" align="center" help="SNPs are from high throughput resequencing only." attributeCategory="popbio"/ -->


            <!--columnAttribute name="gene_hts_nonsyn_syn_ratio" displayName="NonSyn/Syn SNP Ratio All Strains" includeProjects="UniDB,PlasmoDB,ToxoDB,PiroplasmaDB,AmoebaDB,CryptoDB,TriTrypDB,FungiDB" align="center" help="SNPs are from high throughput resequencing only." attributeCategory="popbio"/ --> 

	    <!-- entrez -->
            <columnAttribute name="gene_entrez_id" displayName="Entrez Gene ID" inReportMaker="true" attributeCategory="ids"/>
            <linkAttribute name="gene_entrez_link" displayName="Entrez Gene ID" inReportMaker="false" sortable="false" attributeCategory="ids">
                <displayText>
                    <![CDATA[$$gene_entrez_id$$]]>
                </displayText>
                <url>
                    <![CDATA[http://www.ncbi.nlm.nih.gov/gene/?term=$$gene_entrez_id$$]]>
                </url>
            </linkAttribute>

 
	    <!-- TRANSCRIPT attributes -->
            <columnAttribute name="transcript_product" displayName="Transcript Product Description" help="Protein Product for this gene" attributeCategory="tranattribs"/>
            <columnAttribute name="transcript_length" displayName="Transcript Length" help="Number of nucleotides which are transcribed" attributeCategory="tranattribs"/>
            <columnAttribute name="exon_count" displayName="# Exons in Transcript" help="Total number of Exons"
                             inReportMaker="true" align="center" attributeCategory="tranattribs">
             <reporter name="histogram" displayName="Histogram" scopes=""
               implementation="org.gusdb.wdk.model.report.reporter.HistogramAttributeReporter"
              >
                <description>Display the histogram of the values of this attribute</description>
              </reporter>
            </columnAttribute>
            <columnAttribute displayName="Data Source" name="external_db_name" inReportMaker="false" attributeCategory="ids"/>

            <columnAttribute name="strand" displayName="Gene Strand" help="Strand defines the direction of the gene relative to the contig" attributeCategory="position">
             <reporter name="histogram" displayName="Histogram" scopes=""
               implementation="org.gusdb.wdk.model.report.reporter.HistogramAttributeReporter"
              >
                <description>Display the histogram of the values of this attribute</description>
              </reporter>
            </columnAttribute>



	    <!--  PROTEIN attributes -->
            <columnAttribute name="protein_length" displayName="Protein Length" help="Number of amino acids for the protein" attributeCategory="profeatures"/>
            <columnAttribute name="cds_length" displayName="CDS Length" help="Number of nucleotides which will encode the protein product (coding sequence)" attributeCategory="profeatures"/>

            <columnAttribute name="tm_count" displayName="# TM Domains" help="Numer of transmembrane domains for the protein"
                             inReportMaker="true" align="center" attributeCategory="profeatures">
             <reporter name="histogram" displayName="Histogram" scopes=""
               implementation="org.gusdb.wdk.model.report.reporter.HistogramAttributeReporter"
              >
                <description>Display the histogram of the values of this attribute</description>
              </reporter>
            </columnAttribute>
            <columnAttribute name="molecular_weight" displayName="Molecular Weight" align="center" help="Molecular Weight of the protein in Daltons" attributeCategory="proattribs"/>

            <columnAttribute name="isoelectric_point" displayName="Isoelectric Point" align="center" attributeCategory="proattribs"/>
            <!-- signal peptides -->
            <columnAttribute name="signalp_peptide" displayName="SignalP Peptide" help="Minimum NN Conclusion Score = 3 OR Minimum NN-D-Score = 0.5 OR Minimum HMM Signal Probability = 0.5" attributeCategory="profeatures" sortable="false"/>

	    <!-- go terms -->
            <columnAttribute name="annotated_go_function" displayName="Curated GO Functions" help="GO function assignments provided by sequencing centers" attributeCategory="annotgoterms" sortable="false">
              <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                      implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
                <description>
                  <![CDATA[ Display the terms in the attribute as word clouds ]]>
                </description>
              </reporter>
            </columnAttribute>
            <columnAttribute name="annotated_go_process" displayName="Curated GO Processes" help="GO process assignments provided by sequencing centers" attributeCategory="annotgoterms" sortable="false">
              <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                      implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
                <description>
                  <![CDATA[ Display the terms in the attribute as word clouds ]]>
                </description>
              </reporter>
            </columnAttribute>
            <columnAttribute name="annotated_go_component" displayName="Curated GO Components" help="GO component assignments provided by sequencing centers" attributeCategory="annotgoterms" sortable="false">
              <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                      implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
                <description>
                  <![CDATA[ Display the terms in the attribute as word clouds ]]>
                </description>
              </reporter>
            </columnAttribute>

            <columnAttribute name="predicted_go_function" displayName="Computed GO Functions" help="GO function assignments generated by VEuPathDB utilizing InterPro-to-GO" attributeCategory="predgoterms" sortable="false">
              <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                      implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
                <description>
                  <![CDATA[ Display the terms in the attribute as word clouds ]]>
                </description>
              </reporter>
            </columnAttribute>
            <columnAttribute name="predicted_go_process" displayName="Computed GO Processes" help="GO process assignments generated by VEuPathDB utilizing InterPro-to-GO" attributeCategory="predgoterms" sortable="false">
              <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                      implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
                <description>
                  <![CDATA[ Display the terms in the attribute as word clouds ]]>
                </description>
              </reporter>
            </columnAttribute>
            <columnAttribute name="predicted_go_component" displayName="Computed GO Components" help="GO component assignments generated by VEuPathDB utilizing InterPro-to-GO" attributeCategory="predgoterms" sortable="false">
              <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                      implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
                <description>
                  <![CDATA[ Display the terms in the attribute as word clouds ]]>
                </description>
              </reporter>
            </columnAttribute>

	    <!-- go IDs -->
            <columnAttribute name="annotated_go_id_function" displayName="Curated GO Function IDs" help="GO function assignments provided by sequencing centers" attributeCategory="annotgoids" sortable="false">
              <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                      implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
                <description>
                  <![CDATA[ Display the terms in the attribute as word clouds ]]>
                </description>
              </reporter>
            </columnAttribute>
            <columnAttribute name="annotated_go_id_process" displayName="Curated GO Process IDs" help="GO process assignments provided by sequencing centers" attributeCategory="annotgoids" sortable="false">
              <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                      implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
                <description>
                  <![CDATA[ Display the terms in the attribute as word clouds ]]>
                </description>
              </reporter>
            </columnAttribute>
            <columnAttribute name="annotated_go_id_component" displayName="Curated GO Component IDs" help="GO component assignments provided by sequencing centers" attributeCategory="annotgoids" sortable="false">
              <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                      implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
                <description>
                  <![CDATA[ Display the terms in the attribute as word clouds ]]>
                </description>
              </reporter>
            </columnAttribute>

            <columnAttribute name="predicted_go_id_function" displayName="Computed GO Function IDs" help="GO function assignments generated by VEuPathDB utilizing InterPro-to-GO" attributeCategory="predgoids" sortable="false">
              <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                      implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
                <description>
                  <![CDATA[ Display the terms in the attribute as word clouds ]]>
                </description>
              </reporter>
            </columnAttribute>
            <columnAttribute name="predicted_go_id_process" displayName="Computed GO Process IDs" help="GO process assignments generated by VEuPathDB utilizing InterPro-to-GO" attributeCategory="predgoids" sortable="false">
              <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                      implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
                <description>
                  <![CDATA[ Display the terms in the attribute as word clouds ]]>
                </description>
              </reporter>
            </columnAttribute>
            <columnAttribute name="predicted_go_id_component" displayName="Computed GO Component IDs" help="GO component assignments generated by VEuPathDB utilizing InterPro-to-GO" attributeCategory="predgoids" sortable="false">
              <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                      implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
                <description>
                  <![CDATA[ Display the terms in the attribute as word clouds ]]>
                </description>
              </reporter>
            </columnAttribute>

            <!-- EC numbers -->
            <columnAttribute name="ec_numbers" displayName="EC numbers" help="EC numbers provided by annotation centers or other data providers" attributeCategory="annotecs" sortable="false">
              <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                      implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
                <description>
                  <![CDATA[ Display the terms in the attribute as word clouds ]]>
                </description>
              </reporter>
            </columnAttribute>
            <columnAttribute name="ec_numbers_derived" displayName="EC numbers from OrthoMCL" help="EC numbers derived based on consistency of annotated EC numbers withing OrthoMCL ortholog group" attributeCategory="derivedecs" sortable="false">
              <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                      implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
                <description>
                  <![CDATA[ Display the terms in the attribute as word clouds ]]>
                </description>
              </reporter>
            </columnAttribute>
            

            <columnAttribute name="representative_transcript" displayName="Gene Group (representative gene)"
                             align="center" includeProjects="ToxoDB,EuPathDB,UniDB"/>


            <columnAttribute name="five_prime_utr_length" displayName="Annotated 5' UTR length" align="center" attributeCategory="geneattribs"/>
            <columnAttribute name="three_prime_utr_length" displayName="Annotated 3' UTR length" align="center" attributeCategory="geneattribs"/>



<!-- TO FIX for GUS4 -->
        <!-- TEMPLATE_ANCHOR rnaSeqExpressionGraphAttributes -->
        <!-- TEMPLATE_ANCHOR rnaSeqSsExpressionGraphAttributes -->
        <!-- TEMPLATE_ANCHOR spliceSitesExpressionGraphAttributes -->
        <!-- TEMPLATE_ANCHOR expressionGraphAttributesExpression -->
        <!-- TEMPLATE_ANCHOR expressionGraphAttributesPercentile -->
	   <textAttribute name="tbruTREU927_quantitative_massSpec_Guther_glycosomal_proteome_RSRC_graph"
	       displayName="Tb927 Glyc Prot QProt -Graph"
	       inReportMaker="false" truncateTo="100000" sortable="false"
	       includeProjects="TriTrypDB,UniDB">
           <text>
                   <![CDATA[
                   <a href="@WEBAPP_BASE_URL@/record/gene/$$gene_source_id$$#category:transcriptomics">
                   <img src="/cgi-bin/dataPlotter.pl?project_id=@PROJECT_ID@&type=Guther::GlycosomeProteome&id=$$gene_source_id$$&fmt=png&thumb=1"/>
		</a>
                ]]>
              </text>
	   </textAttribute>
           <textAttribute name="mmulAG07107_Galinski_Mmulatta_Infected_with_Pcynomolgi_ebi_rnaSeq_RSRC_parasitemia_graph" displayName="Mmul infect Pcyn RNA seq - parasitemia graph"
                          inReportMaker="false" truncateTo="100000" sortable="false" includeProjects="HostDB,UniDB">
             <text>
                <![CDATA[
                                <a href="@WEBAPP_BASE_URL@/record/gene/$$gene_source_id$$#category:transcriptomics">
                <img src="/cgi-bin/dataPlotter.pl?type=RNASeq&project_id=@PROJECT_ID@&template=1&fmt=png&id=$$primary_key$$&datasetId=DS_4585d065bf&vp=parasitemia&vpAreFuzzy=1&thumb=1"/>
                                </a>
                ]]>
             </text>
           </textAttribute>
           <textAttribute name="pcynM_Galinski_infected_Mmulatta_rnaSeq_RSRC_parasitemia_graph" displayName="Pcyn infect Mmul RNA seq - parasitemia graph"
                          inReportMaker="false" truncateTo="100000" sortable="false" includeProjects="PlasmoDB,UniDB">
             <text>
                <![CDATA[
                                <a href="@WEBAPP_BASE_URL@/record/gene/$$gene_source_id$$#category:transcriptomics">
                <img src="/cgi-bin/dataPlotter.pl?type=RNASeq&project_id=@PROJECT_ID@&template=1&fmt=png&id=$$primary_key$$&datasetId=DS_c35d971a20&vp=parasitemia&vpAreFuzzy=1&thumb=1"/>
                                </a>
                ]]>
             </text>
           </textAttribute>


           <textAttribute name="rtpcr_graph" displayName="RT-PCR graph"
                          inReportMaker="false" truncateTo="100000" sortable="false" includeProjects="CryptoDB,UniDB">
             <text>
                <![CDATA[
                    <a href="@WEBAPP_BASE_URL@/record/gene/$$gene_source_id$$#category:transcriptomics">
                      <img src="/cgi-bin/dataPlotter.pl?type=Kissinger::KissingerRtPcrProfiles&project_id=@PROJECT_ID@&template=0&fmt=png&id=$$primary_key$$&datasetId=DS_2bf995383e&vp=exprn_val&vpAreFuzzy=1&thumb=1"/>
                    </a>
                ]]>
             </text>
           </textAttribute>


<!--
      <textAttribute name="pdb_blast_form" displayName="Search PDB by the protein sequence"
         inReportMaker="false" truncateTo="100000" sortable="false">
        <text>
          <![CDATA[
<form action='http://www.rcsb.org/pdb/search/smart.do' method='post' name="pdbform" target="_blank">
  <input type='hidden' name='smartSearchSubtype_0' value='SequenceQuery' />
  <input type='hidden' name='sequence_0' value='$$protein_sequence$$' />
  <input type='hidden' name='searchTool_0' value=='blast' />
  <input type='hidden' name='maskLowComplexity_0' value='yes' />
  <input type='hidden' name='eCutOff_0' value='10.0' />
  <input type='hidden' name='smartHomologueReductionPercent' value='90' />
  <input type='hidden' name='target' value='Current' />
  <input type='submit' class='link' value='Search PDB' title='Search PDB by the protein sequence of $$primary_key$$'/>
</form>
          ]]>
        </text>
      </textAttribute>
-->

            <columnAttribute name="project" inReportMaker="false"/>
	    <!-- internal GENE attributes -->
            <columnAttribute name="gene_start_min" displayName="Start Location" inReportMaker="false"/>
            <columnAttribute name="gene_start_min_text" displayName="Start Location" inReportMaker="false"/>
            <columnAttribute name="gene_end_max" displayName="End Location" inReportMaker="false"/>
            <columnAttribute name="gene_end_max_text" displayName="End Location" inReportMaker="false"/>
            <columnAttribute name="gene_context_start" inReportMaker="false"/>
            <columnAttribute name="gene_context_end" inReportMaker="false"/>

            <columnAttribute name="pseudo_string" displayName="Pseudo" inReportMaker="false"/>

	    <!-- internal TRANSCRIPT attributes -->
            <columnAttribute name="start_min" inReportMaker="false"/>
            <columnAttribute name="end_max" inReportMaker="false"/>
            <columnAttribute name="coding_start" inReportMaker="false"/>
            <columnAttribute name="coding_end" inReportMaker="false"/>
            <columnAttribute name="strand_plus_minus" displayName="Strand" inReportMaker="false"/>
            <textAttribute name="location_text" displayName="Genomic Location (Transcript)" help="Contig/Chromosome:start-end(strand)" attributeCategory="summary">
             <display>
                  <![CDATA[
                  $$sequence_id$$:$$start_min$$..$$end_max$$($$strand_plus_minus$$)
                  ]]>
              </display>
              <text>
                  <![CDATA[
                  $$sequence_id$$:$$start_min$$..$$end_max$$($$strand_plus_minus$$)
                  ]]>
              </text>
            </textAttribute>


            <columnAttribute name="organism_text" displayName="Organism (Internal)" inReportMaker="false"/>
            <columnAttribute name="organism_full" displayName="Organism" inReportMaker="false"/>
            <columnAttribute name="genus_species" displayName="genus_species" inReportMaker="false"/>
            <columnAttribute name="ncbi_tax_id" displayName="Taxonomy Id" inReportMaker="false"/>
            <columnAttribute name="so_id" displayName="SO Id" inReportMaker="false"/>
            <columnAttribute name="so_term_name" displayName="SO Term Name" inReportMaker="false"/>
            <columnAttribute name="so_term_definition" displayName="SO Term Definition" inReportMaker="false"/>
            <columnAttribute name="so_version" displayName="SO Version" inReportMaker="false"/>
            <columnAttribute name="anticodon" displayName="Anticodon" inReportMaker="false"/>
            <columnAttribute name="external_db_version" displayName="External DB Version" inReportMaker="false"/>

	    <!-- internal PROTEIN attributes -->
            <columnAttribute name="protein_source_id" inReportMaker="false" />
            <columnAttribute name="aa_sequence_id" inReportMaker="false" />




	    <columnAttribute name="gene_previous_ids" displayName="Previous ID(s)"  attributeCategory="ids"
                             inReportMaker="true" />
         </attributeQueryRef>
<!-- PrimarySequence: sequence source ID, start_min, and end_max for primary
     (as opposed to top-level) location of a gene. John B. says this was
     formerly used for SNPs, and now not at all, so I'm commenting it out. If
     we actually still need it, we should include it in the GeneAttributes table
     and the Bfmv query, so it doesn't require a separate query.

            <attributeQueryRef ref="TranscriptAttributes.PrimarySequence" >
                <columnAttribute name="primary_seq_id" displayName="Genomic Sequence ID (Primary Annotation)" />
                <columnAttribute name="primary_seq_start" displayName="Genomic Location Start (Primary Annotation)" />
                <columnAttribute name="primary_seq_end" displayName="Genomic Location End (Primary Annotation)" />
            </attributeQueryRef>
-->

<!-- moved to GeneAttributes tuning table / Bfmv query
            <attributeQueryRef ref="TranscriptAttributes.GeneGroupRepresentative" includeProjects="ToxoDB,EuPathDB">
                <columnAttribute name="representative_transcript" displayName="Gene Group (representative gene)"
                                 align="center"/>
            </attributeQueryRef>
 -->



            <!-- TEMPLATE_ANCHOR profileAttributeRef -->

            <!-- template_anchor profileMinMaxAttributeRef -->
            <!-- template_anchor profileMinMaxAttributeRnaSenseRef -->
            <!-- template_anchor profileMinMaxAttributeRnaAntisenseRef -->


          <attributeQueryRef ref="TranscriptAttributes.NaSequenceDatabaseName" >
            <columnAttribute name="sequence_database_name" inReportMaker="false"/>
          </attributeQueryRef>



	   <textAttribute name="tbruTREU927_RNAi_Horn_rnaSeq_RSRC_expr_graph"
			  displayName="High-throughput phenotyping using RNAi target sequencing - tpm Graph"

			  inReportMaker="false" truncateTo="100000" sortable="false"
			  includeProjects="TriTrypDB,UniDB">
              <text>
                <![CDATA[
				<a href="@WEBAPP_BASE_URL@/record/gene/$$gene_source_id$$#phenomics">
                <img src="/cgi-bin/dataPlotter.pl?type=RNASeq&project_id=@PROJECT_ID@&template=1&fmt=png&id=$$primary_key$$&datasetId=DS_98fb258539&vp=fpkm&vpAreFuzzy=1&thumb=1"/>
				</a>
                ]]>
              </text>
	   </textAttribute>


          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
          <!-- used in results : shows count of transcripts in this result, per gene in this result -->
          <!--+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

          <attributeQueryRef ref="TranscriptAttributes.TranscriptsFoundPerGene" >
            <columnAttribute name="trans_found_per_gene_internal" />
            <columnAttribute name="transcripts_found_per_gene" displayName="# Transcripts that Met Search Criteria" align="center" help="For each gene, how many of its transcripts met search criteria." />
            <columnAttribute name="transcript_index_per_gene" displayName="Transcript local index" help="For each gene, each of its transcripts in this result gets an index number, starting with 1, 2, ..." />
            <columnAttribute name="has_missing_transcripts" displayName="Gene has Unmatched Transcripts" help="This column has a 'yes' if, in this result, some of the gene's transcripts were not matched by the search. "/>
          </attributeQueryRef>

<!--  cannot specify sorting by a different attribute... so we need to add this attribute as column in same atributeQueryRef
            <textAttribute name="transcripts_found_per_gene" displayName="# Transcripts that Met Search Criteria"  align="center" 
               help="For each gene in your result, how many of its transcripts met search criteria." >
               <text><![CDATA[ $$trans_found_per_gene_internal$$ of $$gene_transcript_count$$ ]]></text>
            </textAttribute>
-->

          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
          <!-- used in gene page : will return comma-delimited list of table names for the particular organism -->  
          <!--+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

<!--
          <attributeQueryRef ref="TranscriptAttributes.TablesForOrganism" >
            <columnAttribute name="tablesForOrg" inReportMaker="false"/>
          </attributeQueryRef>
-->
          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
          <!-- Define Gene Record page sections -->  
          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

<!--
          <attributeQueryRef ref="TranscriptAttributes.HasProteomics" >
            <columnAttribute name="hasProteomics" inReportMaker="false"/>
          </attributeQueryRef>

          <attributeQueryRef ref="TranscriptAttributes.HasQuantitativeProteomics" >
            <columnAttribute name="hasQuantitativeProteomics" inReportMaker="false"/>
          </attributeQueryRef>

          <attributeQueryRef ref="TranscriptAttributes.HasPostTransMod" >
            <columnAttribute name="hasPostTransMod" inReportMaker="false"/>
          </attributeQueryRef>

          <attributeQueryRef ref="TranscriptAttributes.HasHtsSnpsSection" >
            <columnAttribute name="hasHtsSnps" inReportMaker="false"/>
          </attributeQueryRef>

          <attributeQueryRef ref="TranscriptAttributes.HasPhenotypeSection" >
            <columnAttribute name="hasPhenotype" inReportMaker="false"/>
          </attributeQueryRef>


          <attributeQueryRef ref="TranscriptAttributes.HasPdbSimilarity" >
            <columnAttribute name="hasPdbSimilarity" inReportMaker="false"/>
          </attributeQueryRef>

          <attributeQueryRef ref="TranscriptAttributes.HasSsgcid" excludeProjects="EuPathDB,HostDB">
            <columnAttribute name="hasSsgcid" inReportMaker="false"/>
          </attributeQueryRef>

	  <attributeQueryRef ref="TranscriptAttributes.IsUnassignedTCruzi" >
            <columnAttribute name="is_unassigned_tcruzi"  displayName="Is Unassigned T cruzi"  inReportMaker="false" />
	  </attributeQueryRef>


          <textAttribute name="ssgcid_request_link" displayName="ssgcid_request_link" 
                         inReportMaker="false" truncateTo="1000">
                <text>
                    <![CDATA[
                    <b>Nominate this gene for structure determination <a href='http://apps.sbri.org/SSGCIDCommTargReq/Default.aspx'>here</a></b>
                    ]]>
                </text>
	  </textAttribute>

	  <attributeQueryRef ref="TranscriptAttributes.IsAnnotated" >
            <columnAttribute name="is_annotated"  displayName="Is Annotated"  inReportMaker="false" />
	  </attributeQueryRef>

	  <attributeQueryRef ref="TranscriptAttributes.ReleasePolicy" >
            <columnAttribute name="release_policy"  displayName="Release Policy"   inReportMaker="false"/>
	  </attributeQueryRef>
-->

	  <attributeQueryRef ref="TranscriptAttributes.GenomicSequenceLength" >
            <columnAttribute name="genomic_sequence_length"  displayName="Genomic Length"/>
	  </attributeQueryRef>


          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
          <!-- transcript sequence attributes -->  
          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->


          <attributeQueryRef ref="TranscriptAttributes.TranscriptSequence">
            <columnAttribute displayName="Predicted RNA/mRNA Sequence (introns spliced out)"
                             name="transcript_sequence" inReportMaker="true"/>
          </attributeQueryRef>

          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
          <!-- protein sequence -->  
          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

          <attributeQueryRef ref="TranscriptAttributes.ProteinSequence">
            <columnAttribute displayName="Predicted Protein Sequence"
                             name="protein_sequence" inReportMaker="true"/>
          </attributeQueryRef>

          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
          <!-- CDS sequence attributes -->  
          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

          <attributeQueryRef ref="TranscriptAttributes.CDS">
            <columnAttribute displayName="Coding Sequence"
                    name="cds"/>
          </attributeQueryRef>

          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
          <!-- data dump attributes -->  
          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

          <attributeQueryRef ref="TranscriptAttributes.GeneGffAttrs">
              <columnAttribute displayName="SeqId" name="gff_seqid" inReportMaker="false"/>
              <columnAttribute displayName="Data Source" name="gff_source" inReportMaker="false"/>
              <columnAttribute displayName="Feature Type" name="gff_type" inReportMaker="false"/>
              <columnAttribute displayName="Start" name="gff_fstart" inReportMaker="false"/>
              <columnAttribute displayName="Start" name="gff_fend" inReportMaker="false"/>
              <columnAttribute displayName="Score" name="gff_score" inReportMaker="false"/>
              <columnAttribute displayName="Strand" name="gff_strand" inReportMaker="false"/>
              <columnAttribute displayName="Reading Frame" name="gff_phase" inReportMaker="false"/>
              <columnAttribute displayName="ID" name="gff_attr_id" inReportMaker="false"/>
              <columnAttribute displayName="Web ID" name="gff_attr_web_id" inReportMaker="false"/>
              <columnAttribute displayName="Name" name="gff_attr_name" inReportMaker="false"/>
              <columnAttribute displayName="description" name="gff_attr_description" inReportMaker="false"/>
              <columnAttribute displayName="Size" name="gff_attr_size" inReportMaker="false"/>
              <columnAttribute displayName="Locus Tag" name="gff_attr_locus_tag" inReportMaker="false"/>
          </attributeQueryRef>

          <attributeQueryRef ref="TranscriptAttributes.GeneGffSequence" >
              <columnAttribute displayName="Transcript Sequence" name="gff_transcript_sequence" inReportMaker="false"/>
          </attributeQueryRef>

          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
          <!-- NCBI Genetic Code attribute -->  
          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

<!-- 
          <attributeQueryRef ref="TranscriptAttributes.GeneticCode" >
              <columnAttribute displayName="Genetic Code" name="genetic_code" inReportMaker="false"/>
              <columnAttribute displayName="Mitochondrial Genetic Code" name="mitochondrial_genetic_code" inReportMaker="false"/>
              <columnAttribute displayName="Sequence SO Term" name="sequence_so_term" inReportMaker="false"/>
          </attributeQueryRef>
-->


       <!-- =================================================================== -->

<!--
          <attributeQueryRef ref="TranscriptAttributes.Protein_Linkout" includeProjects="CryptoDB">
                <columnAttribute name="protein_id" displayName="Protein ID"
                                 />
                <columnAttribute name="linkout"
                                 inReportMaker="false"
                                 />
          </attributeQueryRef>
-->
<!--
          <attributeQueryRef ref="TranscriptAttributes.SGC_3D_Struct" includeProjects="CryptoDB">
                <columnAttribute name="pdb_id" displayName="Structural Genomics Consortium 3D Structure"
                                 inReportMaker="false"
                                  />
          </attributeQueryRef>
-->
          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
          <!-- Text  attributes -->  
          <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

          <attributeQueryRef ref="TranscriptAttributes.ApolloTranscriptProduct" >
                <columnAttribute name="apollo_transcript_description" displayName="Apollo Product Description" help="This product description was added via the Apollo community annotation platform and differs from the product description in the official genome annotation." inReportMaker="true" />
          </attributeQueryRef>

          <attributeQueryRef ref="TranscriptAttributes.ApolloLinkOut" >
                <columnAttribute name="apollo_link_out" displayName="Link to Apollo" help="This links to the Apollo annotation editor for community annotation." />
          </attributeQueryRef>

          <attributeQueryRef ref="TranscriptAttributes.UniProt" >
            <columnAttribute name="uniprot_ids" displayName="UniProt ID(s)" truncateTo="1000" attributeCategory="ids"/>
            <columnAttribute name="uniprot_links" displayName="UniProt ID(s)" truncateTo="1000" attributeCategory="ids"/>
          </attributeQueryRef>


          <attributeQueryRef ref="TranscriptAttributes.ChromosomeMappingText" includeProjects="CryptoDB,UniDB">
                <columnAttribute name="chromosomemappingtext" displayName="Chromosome" />
          </attributeQueryRef>

          <textAttribute name="overview" displayName="Overview" 
                         inReportMaker="false">

             <text>
                  <![CDATA[
                  <i>$$organism_full$$</i> $$gene_type$$ $$pseudo_string$$ on <a href="@WEBAPP_BASE_URL@/record/genomic-sequence/$$sequence_id$$">$$sequence_id$$</a> from $$gene_start_min_text$$ to $$gene_end_max_text$$ (Chromosome: $$chromosome$$)
                  ]]>
             </text>
          </textAttribute>

<!--
          <textAttribute name="snpoverview" displayName="SNP Overview" 
              includeProjects="PlasmoDB,ToxoDB,PiroplasmaDB,AmoebaDB,CryptoDB,TriTrypDB,FungiDB,UniDB" 
              inReportMaker="false">
             <text>
                  <![CDATA[
                  <b>Total SNPs All Strains:</b> $$gene_total_hts_snps$$<br/>
                  <b>NonSynonymous SNPs All Strains:</b> $$gene_hts_nonsynonymous_snps$$<br/>
                  <b>Noncoding SNPs All Strains:</b> $$gene_hts_noncoding_snps$$<br/>
                  <b>Stop Codon SNPs All Strains:</b> $$gene_hts_stop_codon_snps$$<br/>
                  <b>Synonymous SNPs All Strains:</b> $$gene_hts_synonymous_snps$$<br/>
                  <b>Nonsyn/Syn SNP Ratio All Strains:</b> $$gene_hts_nonsyn_syn_ratio$$<br/>
                  ]]>
             </text>
         </textAttribute>
-->




         <attributeQueryRef ref="TranscriptAttributes.orgAbbrev" >
           <columnAttribute name="organismAbbrev" inReportMaker="false"/>
         </attributeQueryRef>


         <textAttribute name="gbrowseLink" inReportMaker="false" includeProjects="PlasmoDB,ToxoDB,UniDB">
           <!-- TODO UniDB Problem -->
            <text includeProjects="PlasmoDB,UniDB">
                 <![CDATA[
                /cgi-bin/gbrowse/plasmodb/?name=$$sequence_id$$%3A$$gene_context_start$$-$$gene_context_end$$;enable=Gene;h_feat=$$primary_key$$@thistle
                ]]>
            </text>
            <text includeProjects="ToxoDB">
                 <![CDATA[
                /cgi-bin/gbrowse/toxodb/?name=$$sequence_id$$%3A$$gene_context_start$$-$$gene_context_end$$;enable=Gene;h_feat=$$primary_key$$@thistle
                ]]>
            </text>
         </textAttribute>


         <linkAttribute name="JBrowse" displayName="JBrowse" inReportMaker="false"  help="View this Gene in the Genome Browser" sortable="false">
            <displayText>JBrowse</displayText>
            <url>
                <![CDATA[/a/app/jbrowse?data=%2Fa%2Fservice%2Fjbrowse%2Ftracks%2F$$organismAbbrev$$&loc=$$sequence_id$$%3A$$gene_context_start$$%2E%2E$$gene_context_end$$&tracks=gene&highlight=$$sequence_id$$%3A$$gene_start_min$$%2E%2E$$gene_end_max$$]]>
            </url>
         </linkAttribute>


         <textAttribute name="dnaAlternateContext" displayName="Genomic Context"  includeProjects="ToxoDB,UniDB"
               inReportMaker="false">
            <text>
                <![CDATA[
                /cgi-bin/gbrowse_img/toxodb/?name=$$sequence_id$$%3A$$gene_context_start$$-$$gene_context_end$$;embed=1;type=Gene;options=Gene+2;h_feat=$$primary_key$$@thistle;width=600;hmap=dnaContextMap;base=/cgi-bin/gbrowse
                ]]>
            </text>
         </textAttribute>
<!-- CHECK AND FIX for UniDB ; unify! -->
        <attributeQueryRef ref="TranscriptAttributes.CellularLocalization" includeProjects="GiardiaDB,UniDB">
          <columnAttribute name="dic_img_uri" displayName="DIC Image"/>
          <columnAttribute name="gfp_img_uri" displayName="GFP Image"/>
          <columnAttribute name="is_visible" displayName="Visible"/>
          <columnAttribute name="has_image" displayName="Has Image"/>

          <textAttribute name="dbp_image" displayName="DIC/GFP Image" help="DIC/GFP Image" align="center"
               truncateTo="10000">
            <text>
              <![CDATA[
              <span style="white-space: nowrap">
              <a href="/cgi-bin/geneimage?source_id=$$gene_source_id$$&project_id=GiardiaDB">
               <img src="/common/GintestinalisAssemblageA/image/gassAWB_DBP_GeneImage_RSRC/$$dic_img_uri$$.jpg" style="display:$$is_visible$$" width="80" height="80"/>
              </a>

              <a href="/cgi-bin/geneimage?source_id=$$gene_source_id$$&project_id=GiardiaDB">
               <img src="/common/GintestinalisAssemblageA/image/gassAWB_DBP_GeneImage_RSRC/$$gfp_img_uri$$.jpg" style="display:$$is_visible$$" width="80" height="80"/>
               </a>
               </span>
              ]]> 
             </text>
           </textAttribute> 
          <columnAttribute name="dbp_image_note" displayName="Image Description" truncateTo="1000"/>
         </attributeQueryRef>

         <!-- TODO:  Giardia and TriTryp have this.... unidb can only have one attribute named this -->
        <attributeQueryRef ref="TranscriptAttributes.CellularLocalization" includeProjects="TriTrypDB">
          <columnAttribute name="uri" displayName="Image"/>

          <textAttribute name="dbp_image" displayName="Cellular localization images" help="Cellular localization images" align="left"
               truncateTo="10000">
            <text>
              <![CDATA[
              <span style="white-space: nowrap">
                  $$uri$$
               </span>
              ]]> 
             </text>
           </textAttribute> 
         </attributeQueryRef> 


<!--
          <attributeQueryRef ref="TranscriptAttributes.Plasmogem" includeProjects="PlasmoDB">
            <columnAttribute name="has_plasmogem_info" inReportMaker="false"/>
            <columnAttribute name="plasmogem_gene_id" inReportMaker="false"/>
            <columnAttribute name="pg_resource_list" inReportMaker="false"/>
            <columnAttribute name="pg_design_list" inReportMaker="false"/>
            <textAttribute name="plasmogem_link" displayName="PlasmoGEM"


                           inReportMaker="false" truncateTo="10000">
              <text>
              <![CDATA[<a href="http://plasmogem.sanger.ac.uk/genes/list?name_prod=$$plasmogem_gene_id$$&resop=or">PlasmoGEM available resources (finished plasmids): $$pg_resource_list$$. Available designs: $$pg_design_list$$.</a>
                 ]]>
              </text>
            </textAttribute>
          </attributeQueryRef>
-->

          <!-- Test attribute query -->
          <attributeQueryRef
              ref="TranscriptAttributes.RandomIntAttr"
              attributeMetaQueryRef="TranscriptAttributes.MetaRandomIntAttr">
          </attributeQueryRef>


<!-- crispr data NOT loaded yet - TO BE FIXED 
        <attributeQueryRef ref="TranscriptAttributes.Phenotype_tgonGT1_crisprPhenotype_CrisprScreen_RSRC" includeProjects="ToxoDB,UniDB">
          <columnAttribute name="tgonGt1CrisprMeanPhenotype" displayName="T.gondii GT1 CRISPR Phenotype - Mean Phenotype"/>
        </attributeQueryRef>


        <attributeQueryRef ref="TranscriptAttributes.Phenotype_tgonGT1_crisprPhenotype_CrisprFunctionalProfiling_RSRC" includeProjects="ToxoDB,UniDB">
          <columnAttribute name="tgonGt1CrisprFuncPE" displayName="T.gondii GT1 CRISPR Phenotype - Peritoneum Composite Score"/>
          <columnAttribute name="tgonGt1CrisprFuncLung" displayName="T.gondii GT1 CRISPR Phenotype - Lung Composite Score"/>
          <columnAttribute name="tgonGt1CrisprFuncLiver" displayName="T.gondii GT1 CRISPR Phenotype - Liver Composite Score"/>
          <columnAttribute name="tgonGt1CrisprFuncSpleen" displayName="T.gondii GT1 CRISPR Phenotype - Spleen Comosite Score"/>
        </attributeQueryRef>
-->



        <attributeQueryRef ref="TranscriptAttributes.Phenotype_pfal3D7_phenotype_pB_mutagenesis_MIS_MFS_RSRC" includeProjects="PlasmoDB,UniDB">
          <columnAttribute name="pfal3D7PiggyBacMutMfs" displayName="P.falciparum 3D7 piggyBac insertion mutagenesis - mutant fitness score"/>
          <columnAttribute name="pfal3D7PiggyBacMutMis" displayName="P.falciparum 3D7 piggyBac insertion mutagenesis - mutagenesis index score"/>
        </attributeQueryRef>


        <attributeQueryRef ref="TranscriptAttributes.Phenotype_pknoH_phenotype_piggyBac_mutagenesis_HME_MIS_OIS_RSRC" includeProjects="PlasmoDB,UniDB">
          <columnAttribute name="pknoHPiggyBacMutOIS" displayName="P.knowlesi strain H piggyBac mutagenesis - Occupancy index score"/>
          <columnAttribute name="pknoHPiggyBacMutHMS" displayName="P.knowlesi strain H piggyBac mutagenesis - Hybrid model score"/>
        </attributeQueryRef>

        <attributeQueryRef ref="TranscriptAttributes.Phenotype_pknoA1H1_phenotype_piggyBac_mutagenesis_MIS_MFS_RSRC" includeProjects="PlasmoDB,UniDB">
          <columnAttribute name="pknoA1H1PiggyBacMutMISplus" displayName="P.knowlesi strain AIHI piggyBac mutagenesis - MIS plus score"/>
          <columnAttribute name="pknoA1H1PiggyBacMutMIS" displayName="P.knowlesi strain AIHI piggyBac mutagenesis - MIS score"/>
          <columnAttribute name="pknoA1H1PiggyBacMutMFS" displayName="P.knowlesi strain AIHI piggyBac mutagenesis - MFS score"/>
          <columnAttribute name="pknoA1H1PiggyBacMutMutability" displayName="P.knowlesi strain AIHI piggyBac mutagenesis - mutability"/>

        </attributeQueryRef>



        <attributeQueryRef ref="TranscriptAttributes.InterproColumns" >
            <columnAttribute name="cdd_id" displayName="CDD ID"/>
            <columnAttribute name="cdd_description" displayName="CDD Description"/>
            <columnAttribute name="gene3d_id" displayName="Gene3D ID"/>
            <columnAttribute name="gene3d_description" displayName="Gene3D Description"/>
            <columnAttribute name="hamap_id" displayName="Hamap ID"/>
            <columnAttribute name="hamap_description" displayName="Hamap Description"/>
            <columnAttribute name="ncbifam_id" displayName="NCBIfam ID"/>
            <columnAttribute name="ncbifam_description" displayName="NCBIfam Description"/>
            <columnAttribute name="panther_id" displayName="PANTHER ID"/>
            <columnAttribute name="panther_description" displayName="PANTHER Description"/>
            <columnAttribute name="pfam_id" displayName="PFam ID"/>
            <columnAttribute name="pfam_description" displayName="PFam Description"/>
            <columnAttribute name="pirsf_id" displayName="PirSF ID"/>
            <columnAttribute name="pirsf_description" displayName="PirSF Description"/>
            <columnAttribute name="prints_id" displayName="PRINTS ID"/>
            <columnAttribute name="prints_description" displayName="PRINTS Description"/>
            <columnAttribute name="prositeprofiles_id" displayName="Prositefamilies ID"/>
            <columnAttribute name="prositeprofiles_description" displayName="Prositefamilies Description"/>
            <columnAttribute name="sfld_id" displayName="SFLD ID"/> 
            <columnAttribute name="sfld_description" displayName="SFLD Description"/> 
            <columnAttribute name="smart_id" displayName="Smart ID"/> 
            <columnAttribute name="smart_description" displayName="Smart Description"/> 
            <columnAttribute name="superfamily_id" displayName="Superfamily ID"/>
            <columnAttribute name="superfamily_description" displayName="Superfamily Description"/>
        </attributeQueryRef>

<!-- 
        <attributeQueryRef ref="TranscriptAttributes.tbruTREU927_RNAi_Horn_cdsColums" includeProjects="TriTrypDB,UniDB">
            <columnAttribute name="no_tet_cds" displayName="Tet- Cont (CDS only)"/>
            <columnAttribute name="bfd3_cds" displayName="BFd3 (CDS only)"/>
            <columnAttribute name="bfd6_cds" displayName="BFd6 (CDS only)"/>
            <columnAttribute name="pf_cds" displayName="PF (CDS only)"/>
            <columnAttribute name="dif_cds" displayName="difn (CDS only)"/>
            <columnAttribute name="fc_bfd3_cds" displayName="BFd3/Tet- (CDS only)"/>
            <columnAttribute name="fc_bfd6_cds" displayName="BFd6/Tet- (CDS only)"/>
            <columnAttribute name="fc_pf_cds" displayName="PF/Tet- (CDS only)"/>
            <columnAttribute name="fc_dif_cds" displayName="difn/Tet- (CDS only)"/>
        </attributeQueryRef>


        <attributeQueryRef ref="TranscriptAttributes.tbruTREU927_RNAi_Horn_modelColums" includeProjects="TriTrypDB,UniDB">
            <columnAttribute name="no_tet_model" displayName="Tet- Cont (CDS+UTR)"/>
            <columnAttribute name="bfd3_model" displayName="BFd3 (CDS+UTR)"/>
            <columnAttribute name="bfd6_model" displayName="BFd6 (CDS+UTR)"/>
            <columnAttribute name="pf_model" displayName="PF (CDS+UTR)"/>
            <columnAttribute name="dif_model" displayName="difn (CDS+UTR)"/>
            <columnAttribute name="fc_bfd3_model" displayName="BFd3/Tet- (CDS+UTR)"/>
            <columnAttribute name="fc_bfd6_model" displayName="BFd6/Tet- (CDS+UTR)"/>
            <columnAttribute name="fc_pf_model" displayName="PF/Tet- (CDS+UTR)"/>
            <columnAttribute name="fc_dif_model" displayName="difn/Tet- (CDS+UTR)"/>

         </attributeQueryRef>
-->


	 <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
	 <!-- Toxo LOPIT dataset -->
	 <!--+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->



        <attributeQueryRef ref="TranscriptAttributes.ToxoLOPIT" includeProjects="ToxoDB,UniDB">
          <columnAttribute name="prob_MAP" displayName="Final Probability (TAGM-MAP)"  help="the final probability calculated by TAGM-MAP"/>
	  <columnAttribute name="prob_MCMC" displayName="Top Probability (TAGM-MCMC)" help="the maximum probability calculated by TAGM-MCMC"/>
	  
	  <columnAttribute name="MAP_location" displayName="Predicted Location (TAGM-MAP)" help="the location predicted by the TAGM-MAP method" >
              <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                      implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
                <description>
                  <![CDATA[ Display the terms in the attribute as word clouds ]]>
                </description>
              </reporter>
            </columnAttribute>

          <columnAttribute name="MCMC_location" displayName="Top Predicted Location (TAGM-MCMC)" help="the predicted location with the maximum TAGM-MCMC probability" >
              <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                      implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
                <description>
                  <![CDATA[ Display the terms in the attribute as word clouds ]]>
                </description>
              </reporter>
            </columnAttribute>


  
              <textAttribute name="LOPITGraphPng" displayName="LOPIT TAGM-MCMC Joint Probability" includeProjects="ToxoDB,UniDB"
			  inReportMaker="false" truncateTo="100000" sortable="false">
              <text><![CDATA[<a href="app/record/gene/$$gene_source_id$$#category:protein-targeting-and-localisation"><img src="/cgi-bin/dataPlotter.pl?project_id=@PROJECT_ID@&id=$$gene_source_id$$&type=LOPIT::Ver1&fmt=png&thumbnail=1"></a>]]></text>
            </textAttribute>
          </attributeQueryRef>


        <attributeQueryRef ref="TranscriptAttributes.TrypLOPIT" includeProjects="TriTrypDB,UniDB">
          <columnAttribute name="prob_MAP_tryp" displayName="Bloodstream form Probability"  help="the probability calculated for bloodstream form"/>
	  <columnAttribute name="prob_MCMC_tryp" displayName="Procyclic form Probability" help="the probability calculated for procyclic form"/>
	  <columnAttribute name="MAP_location_tryp" displayName="bloodstream form location" help="the location predicted for bloodstream form" >
              <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                      implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
                <description>
                  <![CDATA[ Display the terms in the attribute as word clouds ]]>
                </description>
              </reporter>
            </columnAttribute>
          <columnAttribute name="MCMC_location_tryp" displayName="procyclic form location" help="the predicted location for procyclic form " >
              <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                      implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
                <description>
                  <![CDATA[ Display the terms in the attribute as word clouds ]]>
                </description>
              </reporter>
            </columnAttribute>

          </attributeQueryRef>

        </recordClass>

    </recordClassSet>
</wdkModel>
