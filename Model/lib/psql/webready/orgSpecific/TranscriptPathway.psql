DROP TABLE if exists :SCHEMA.:REF_ORG_ABBREVTranscriptPathwayTmp;
/*

ATTENTION: This table is empty. We will populate it in the comparative graph so that we can include ortho-derived EC numbers. 
We are creating it here so that it is partitioned.
*/

/* This is the final TranscriptPathway table */

CREATE UNLOGGED TABLE :SCHEMA.:REF_ORG_ABBREVTranscriptPathwayTmp (
    -- transcript information
    source_id   VARCHAR(80),
    gene_source_id VARCHAR(80),

    --pathway information
    pathway_source_id   VARCHAR(50),
    pathway_name    VARCHAR(150),
    pathway_id  NUMERIC(12),
    pathway_source  TEXT, -- TODO should this be a varchar?
    external_database_release_id    NUMERIC(10),

    --match information
    ec_number_gene  VARCHAR(16),
    wildcard_count_gene NUMERIC(3),
    ec_number_pathway   VARCHAR(16),
    wildcard_count_pathway  NUMERIC(3),
    exact_match NUMERIC(3),
    complete_ec NUMERIC(3),

    -- fields required for partioning
    project_id  varchar(20),
    org_abbrev  varchar(20),
    modification_date   timestamp
);

:CREATE_AND_POPULATE
SELECT tpt.*  from :SCHEMA.:REF_ORG_ABBREVTranscriptPathwayTmp tpt
:DECLARE_PARTITION;

DROP TABLE :SCHEMA.:REF_ORG_ABBREVTranscriptPathwayTmp;
